function Event_error(a,c,b){if(c){alert("Error in "+a+" event for control "+c+"  "+b)}else{alert("Error in "+a+" event for page "+b)}}function getDataStoreData(e,a,d){var c;switch(a.storageType){case"L":if(!localStorage[_appId+"_"+e]){localStorage[_appId+"_"+e]="{}"}var b=localStorage[_appId+"_"+e];c=JSON.parse(b);break;case"S":if(!sessionStorage[_appId+"_"+e]){sessionStorage[_appId+"_"+e]="{}"}var b=sessionStorage[_appId+"_"+e];c=JSON.parse(b);break;case"P":if(!window[e+"datastore"]){window[e+"datastore"]={}}c=window[e+"datastore"];break}return c}function saveDataStoreData(d,a,c){switch(a.storageType){case"L":localStorage[_appId+"_"+d]=JSON.stringify(c);break;case"S":sessionStorage[_appId+"_"+d]=JSON.stringify(c);break;case"P":window[d+"datastore"]=c;break}var b=window["Event_change_"+d];if(b){b($.Event("change"))}}$(document).ready(function(){$(window).resize(function(a){sizeFlowLayouts()})});function sizeFlowLayouts(){var a=[];if(window._pageIframeWindow){a=$(_pageIframeWindow[0].document).find("div.flowLayout")
}else{a=$("div.flowLayout")}a.each(function(){var b=$(this);if(b.is(":visible")){sizeFlowLayout(b)}})}function sizeFlowLayout(e){var b=e.width();var j=e.children(".flowLayoutCell");var a=window[e.attr("id")+"details"];j.css("width",a.cellWidth);var h=e.children(".flowLayoutCell").first();var c=h.width();var g=toPixels(h.css("margin-left"))+toPixels(h.css("margin-right"));var f=toPixels(h.css("padding-left"))+toPixels(h.css("padding-right"));var i=toPixels(h.css("border-left-width"))+toPixels(h.css("border-right-width"));var d=Math.min(Math.floor(b/c),j.length);c+=(b-d*c)/d-g-f-i;if($("body").css("transform")&&$("body").css("transform")!="auto"){if(b<=(c+g+f+i)*d){c-=1/d}}e.children(".flowLayoutCell").css("width",c)}function Gallery_removeImage(c,d){if(confirm("Remove image?")){var b=$(c.target);if(typeof _rapidmobile!="undefined"){_rapidmobile.removeImage(d,b.attr("src"))}b.remove();var a=window["Event_imageRemoved_"+d];if(a){window["Event_imageRemoved_"+d]()}}}function Gallery_showImage(e,f){var a=$("div.bigGallery");
if(!a[0]){a=$("body").append("<div class='bigGallery'></div>").find("div.bigGallery")}a.hide();var b=$(e.target);a.html("<img src='"+b.attr("src")+"'/>");var c=b.index();var d=window[f+"details"];if(d){a.append(d.captions[c])}}function getGridDataStoreData(b,a){data=null;dataString=null;switch(a.dataStorageType){case"L":dataString=localStorage[_appId+b];break;case"S":dataString=sessionStorage[_appId+b];break;case"P":dataString=window[_appId+"datastore"];break}if(dataString){data=JSON.parse(dataString);if(data){if(!data.fields){data.fields=[]}if(!data.rows){data.rows=[]}}}return data}function saveGridDataStoreData(c,a,b){switch(a.dataStorageType){case"L":localStorage[_appId+c]=JSON.stringify(b);break;case"S":sessionStorage[_appId+c]=JSON.stringify(b);break;case"P":window[_appId+"datastore"]=JSON.stringify(b);break}}function sortGridByColumn(j,b,a,d,l){if(a&&a.columns&&a.columns[d]){var g=getData_grid(j,b,null,a);var k=a.columns[d].field;var c=d;if(g.fields[d]!=k){for(var e in g.fields){if(g.fields[e]&&g.fields[e].toLowerCase()==k.toLowerCase()){c=e;
break}}}if(g&&g.rows&&g.fields[c]){var m=[];for(var e in g.rows){m.push({index:e,value:g.rows[e][c]})}switch(a.columns[d].sort){case"n":m.sort(function(i,f){var p=i.value;if(p){p=parseFloat(p.replace(",",""))}var o=f.value;if(o){o=parseFloat(o.replace(",",""))}return p-o});break;case"d1":m.sort(function(p,f){var r=p.value.split("/");var o=f.value.split("/");if(!r||r.length<3){return 1}else{if(!o||o.length<3){return -1}else{var q=new Date(r[2],r[1]-1,r[0]);var i=new Date(o[2],o[1]-1,o[0]);return q.getTime()-i.getTime()}}});break;case"d2":m.sort(function(q,i){var s=q.value.split("-");var p=i.value.split("-");if(!s||s.length<3){return 1}else{if(!p||p.length<3){return -1}else{var f=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];for(m1 in f){if(s[1].toLowerCase().substr(0,3)==f[m1]){break}}for(m2 in f){if(p[1].toLowerCase().substr(0,3)==f[m2]){break}}var r=new Date(s[2],m1,s[0]);var o=new Date(p[2],m2,p[0]);return r.getTime()-o.getTime()}}});break;case"d3":m.sort(function(p,f){var r=p.value.split("/");
var o=f.value.split("/");if(!r||r.length<3){return 1}else{if(!o||o.length<3){return -1}else{var q=new Date(r[2],r[0]-1,r[1]);var i=new Date(o[2],o[0]-1,o[1]);return q.getTime()-i.getTime()}}});break;case"d1":m.sort(function(p,f){var r=p.value.split("-");var o=f.value.split("-");if(!r||r.length<3){return 1}else{if(!o||o.length<3){return -1}else{var q=new Date(r[0],r[1]-1,r[1]);var i=new Date(o[0],o[1]-1,o[1]);return q.getTime()-i.getTime()}}});break;case"c":var h=new Function("item1","item2",a.columns[d].sortFunction);m.sort(h);break;default:m.sort(function(r,q){if(r.value==null){return 1}else{if(q.value==null){return -1}else{var p=0;v1=r.value.toLowerCase();v2=q.value.toLowerCase();if(v1!=v2){var f=Math.min(v1.length,v2.length);for(var o=0;o<f;o++){if(v1.charCodeAt(o)>v2.charCodeAt(o)){p=1;break}else{if(v1.charCodeAt(o)<v2.charCodeAt(o)){p=-1;break}}}if(p==0){p=v1.length-v2.length}}return p}}})}var n=[];if(l){for(var e in m){n.push(g.rows[m[e].index])}}else{for(var e in m){n.push(g.rows[m[m.length-e-1].index])
}}g.rows=n;setData_grid(j,b,null,a,g)}}}function getGridSelectedRowNumber(g,c){var a=-1;var e=$(c.target);var f=e.closest("tr.rowStyle1,tr.rowStyle2");if(f[0]){var d=f.closest("table").find("tr.rowStyle1,tr.rowStyle2").not("[data-ignore]");if(f.is("[data-ignore]")){f=f.prevAll("tr.rowStyle1,tr.rowStyle2").not("[data-ignore]").first()}a=d.index(f)}else{var b=$("#"+g);a=b.find("tr.rowStyle1,tr.rowStyle2").not("[data-ignore]").index(b.find("tr.rowSelect"))}if(a>-1){a++}return a}function getGridSelectedRow(f,b){var e=null;var d=$(b.target);var e=d.closest("tr.rowStyle1,tr.rowStyle2");if(e[0]){var c=e.closest("table").find("tr.rowStyle1,tr.rowStyle2").not("[data-ignore]");if(e.is("[data-ignore]")){e=e.prevAll("tr.rowStyle1,tr.rowStyle2").not("[data-ignore]").first()}}else{var a=$("#"+f);e=a.find("tr.rowSelect").not("[data-ignore]")}return e}function linkClick(a,e,b){var c=JSON.parse(e);for(var d in c){var j=null;var k=c[d];var h=k.itemId;if(h){if(k.type){var g=h.split(".");var f=$.Event("linkClick");
if(g.length==1){j=window["getData_"+k.type](f,h,k.field,k.details)}else{if(g.length==2){j=window["getProperty_"+k.type+"_"+g[1]](f,g[0],k.field,k.details)}}}else{if(h.indexOf("System")==0){var g=h.split(".");switch(g[1]){case"app id":j=_appId;break;case"app version":j=_appVersion;break;case"page id":j=_pageId;break;case"user name":j=_userName;break;case"online":j=(typeof _rapidmobile=="undefined"?true:_rapidmobile.isOnline()==true||_rapidmobile.isOnline()=="true");break;case"mobile":j=(typeof _rapidmobile=="undefined"?false:true);break;case"mobile version":j=(typeof _rapidmobile=="undefined"?-1:(_rapidmobile.getVersion?_rapidmobile.getVersion():0));break;case"true":j="true";break;case"false":j="false";break;case"field":j=k.field;break}}}}else{j=$.getUrlVar(k.itemId)}if(j!=null&&j!==undefined){a+="&"+k.name+"="+j}}if(b){window.open(a,"_blank")}else{window.location=a}}var _stickyFooterHeight=0;function checkPagePanelFooter(){var a=$("div.pagePanelFooter");if(a[0]){window.setTimeout(function(e){$("html").css("height","auto");
$("body").css("min-height","0");var c=a.height();if(c>0){_stickyFooterHeight=c}var b=$(document.body);var d=0;b.children("div.r-panel:visible").each(function(){d+=$(this).height()});d=Math.max(d,b.height());if(d+b.offset().top+_stickyFooterHeight<$(window).height()){a.addClass("pagePanelStickyFooter")}else{a.removeClass("pagePanelStickyFooter")}},200)}}$(document).ready(function(){$("button").click(checkPagePanelFooter);$("input").change(checkPagePanelFooter);$("select").change(checkPagePanelFooter);$("textarea").change(checkPagePanelFooter);$(window).resize(function(){checkPagePanelFooter();positionLoadingCovers()});checkPagePanelFooter()});var date_quickISORegex=/^\d{4}-\d{2}-\d{2}/;var date_quickOracleRegex=/^\d{1,2}-[a-zA-Z]{3}-\d{4}/;var _signatureControls={};var _signatureCanvases=[];$(document).ready(function(){$(window).resize(function(c){var d=Math.max(window.devicePixelRatio||1,1);for(var b in _signatureCanvases){canvas=_signatureCanvases[b];var a=canvas.getContext("2d");var e=a.getImageData(0,0,canvas.width,canvas.height);
canvas.width=canvas.offsetWidth*d;canvas.height=canvas.offsetHeight*d;a.scale(d,d);a.putImageData(e,0,0)}})});function sizeSlidePanelCover(){if(typeof(window.parent._pageIframe)==="undefined"){var e=$(document);var a=$(".slidePanelPane");if(a[0]){a.css("height",e.height()-a.offset().top)}var d=$(window);$("div.slidePanelCover").css({width:d.width(),height:d.height()})}else{var c=window.parent._pageIframe;var b=window.parent._scale;$(c[0].contentDocument).find("div.slidePanelCover").css({width:c.width()/b,height:c.height()/b})}}$(document).ready(function(){$(window).resize(function(a){sizeSlidePanelCover()})});var _databaseActionSequence=[];var _databaseActionMaxSequence=[];function getDatabaseActionSequence(b){var a=_databaseActionSequence[b];if(!a){a=0}a++;_databaseActionSequence[b]=a;return a}function getDatabaseActionMaxSequence(b){var a=_databaseActionMaxSequence[b];if(a===undefined){a=0;_databaseActionMaxSequence[b]=a}return a}function getDatabaseActionInputData(h,g,o,f){var d={};if(h){if(f&&f.fields&&f.rows&&f.fields.length>0&&f.rows.length>0){d.fields=[];
for(var e in g){d.fields.push(o+"."+g[e])}d.rows=[];for(var e in f.rows){var c=f.rows[e];var p=[];for(var b in g){var m=g[b];var n=-1;for(var a in f.fields){if(m.toLowerCase()==f.fields[a].toLowerCase()){n=a;break}}if(n>-1){p.push(c[n])}else{p.push(null)}}d.rows.push(p)}}else{d.rows=[];d.rows.push([])}}else{d.fields=[];d.rows=[];d.rows.push([]);for(var e in g){var l=g[e];d.fields.push(l.id);d.rows[0].push(l.value)}}return d}var _webserviceActionSequence=[];var _webserviceActionMaxSequence=[];function getWebserviceActionSequence(b){var a=_webserviceActionSequence[b];if(!a){a=0}a++;_webserviceActionSequence[b]=a;return a}function getWebserviceActionMaxSequence(b){var a=_webserviceActionMaxSequence[b];if(a===undefined){a=0;_webserviceActionMaxSequence[b]=a}return a};function Init_calendar(d,b){var c=$("#"+d);var a=new Date();c.attr("data-year",a.getFullYear());c.attr("data-month",a.getMonth());calendarUpdate(d)}function Init_flowLayout(b,a){$("#"+b).children("div").click(function(e){var d=$("#"+b);d.children("div").removeClass("selected");var c=$(this).addClass("selected").index()+1;d.children("div:nth-child("+c+")").addClass("selected")})}function Init_gallery(b,a){$("#"+b).children("img").click(function(e){var d=window[b+"details"];if(d){if(d.onImageClick=="large"){Gallery_showImage(e,b)}else{if(d.onImageClick=="caption"){var c=$(e.target).index();if(d.captions&&d.captions[c]){alert(d.captions[c])}}else{Gallery_removeImage(e,b)}}}})}function Init_grid(g,c){var e=$("#"+g);if(!e.is("table")){e=e.find("table").last()}if(c){if(c.columns){var f=e.find("tr:first-child td");for(var b in c.columns){if(c.columns[b].sort){var a=$(f.get(b));a.css("cursor","pointer");a.click({index:b},function(i){var h=$(i.target);if(!h.is("span")){h=h.find("span")}if(h.html()=="\uf0de"){sortGridByColumn(i,g,c,i.data.index,false);
h.html("&#xf0dd;")}else{sortGridByColumn(i,g,c,i.data.index,true);h.html("&#xf0de;")}})}}}if(c.dataStorageType){var d=getGridDataStoreData(g,c);if(d){setData_grid($.Event("gridinit"),g,null,c,d)}$("#"+g).click(function(h){var i=getGridDataStoreData(g,c);i.selectedRowNumber=getGridSelectedRowNumber(g,h);saveGridDataStoreData(g,c,i)})}}}function Init_map(b,a){loadMapJavaScript(b,a)}function Init_pagePanel(c,b){if(b.simple===undefined||!b.simple){var a="<center><h1>Page</h1></center>";$.ajax({url:"~?a="+_appId+"&v="+_appVersion+"&p="+b.pageId+"&action=dialogue",type:"GET",data:null,error:function(g,d,f){var e="Error loading page : "+f},success:function(h){if(h){var k=$("head");a="";script="";var j=$(h);for(var f in j){switch(j[f].nodeName){case"#text":case"TITLE":case"META":break;case"SCRIPT":if(j[f].innerHTML){var m=j[f].outerHTML;if(m.indexOf("var _appId =")==-1&&m.indexOf("var _appVersion =")==-1&&m.indexOf("var _pageId =")==-1&&m.indexOf("var _mobileResume =")==-1){script+=m}}else{var l=j[f].outerHTML;
if(l.indexOf('src="')>0){var g=l.indexOf('src="')+5;var d=l.substr(g,l.indexOf('"',g)-g);if(!k.find("script[src='"+d+"']")[0]){k.append(l)}}}break;case"LINK":var l=j[f].outerHTML;if(!j[f].innerHTML&&l.indexOf('href="')>0){var g=l.indexOf('href="')+6;var e=l.substr(g,l.indexOf('"',g)-g);if(!k.find("link[href='"+e+"']")[0]){k.append(l)}}break;default:if(j[f].outerHTML){a+=j[f].outerHTML}break}}if(b.footer){a="<div class='pagePanelFooter'>"+a+"</div>"}$("#"+c).html(a);if(script){$("#"+c).append(script)}$(window).resize()}}})}}function Init_responsivedate(c,a){var b=a.format;if(!b){b="dd/mm/yy"}$("#"+c).find("input").datepicker({changeMonth:true,changeYear:true,dateFormat:b,maxDate:a.maxDate,minDate:a.minDate,yearRange:a.yearRange,showOtherMonths:a.showOtherMonths,selectOtherMonths:a.selectOtherMonths,constrainInput:true,onChangeMonthYear:function(g,i,h){try{if(h&&h.currentDay&&h.input.val()){var e=h.selectedDay;var k=$(this);var j=k.datepicker("getDate");if(j){if(e){j.setDate(e)}j.setMonth(i-1);
j.setFullYear(g);k.datepicker("setDate",j);if(!a.dontTriggerChange){h.input.trigger("change")}}}}catch(f){}}}).change(function(k){var m=$(this);var e=m.val();if(e){var f=e.split("/");if(f.length==3){if(f[2].length<4){try{var h=parseInt(f[2]);var d=new Date();var j=d.getFullYear()+"";var l=j.substr(0,2)*1;var i=j.substr(2)*1;if(h>i+10){l--}if(f[2].length==1){e=f[0]+"/"+f[1]+"/"+l+"0"+f[2]}if(f[2].length==2){e=f[0]+"/"+f[1]+"/"+l+f[2]}if(f[2].length==3){e=f[0]+"/"+f[1]+"/"+(l+"").substr(0,1)+f[2]}m.val(e)}catch(g){}}}if(a.format=="dd-M-yy"){m.val(e.toUpperCase())}}}).mouseup(function(e){if((a.readonly||a.readonly===undefined)){var d=$(this);var f=d.datepicker("widget");if(f.is(":visible")&&f.css("opacity")==1){d.datepicker("hide")}else{d.datepicker("show")}}});$("#"+c).find("input").datepicker("setDate",a.value)}function Init_signature(g,c){var b=$("#"+g)[0];if(b){var e=2;var f=2;switch(c.lineThickness){case"thin":e=0.5;f=1.5;break;case"thick":e=5;f=7.5;break}var a=new SignaturePad(b,{backgroundColor:"rgb(255,255,255)",penColor:c.lineColour,minWidth:e,maxWidth:f});
_signatureControls[g]=a;var d=Math.max(window.devicePixelRatio||1,1);b.width=b.offsetWidth*d;b.height=b.offsetHeight*d;b.getContext("2d").scale(d,d);_signatureCanvases.push(b)}}function Init_slidePanel(h,b){var a=$("body");var c=a.find("div.slidePanelCover");if(!c[0]){a.append("<div class='slidePanelCover'></div>");c=a.find("div.slidePanelCover");var g=$(document);c.css({width:g.width(),height:g.height()})}var d=$("#"+h);var f=d.attr("data-pane");var e=$("#"+f);if(e.is(":visible")){c.show()}else{c.hide()}d.click({width:e.css("width"),left:e.css("margin-left")},function(j){var i=j.data.width;var k=j.data.left;if(e.is(":visible")){e.animate({"margin-left":"-"+i},500,function(){e.hide();d.removeClass("slidePanelOpen");d.addClass("slidePanelClosed");c.hide()})}else{e.css({"margin-left":"-"+i}).show();e.animate({"margin-left":0},500);d.removeClass("slidePanelClosed");d.addClass("slidePanelOpen");c.show()}});c.click({width:e.css("width"),left:e.css("margin-left")},function(j){var i=j.data.width;
var k=j.data.left;e.animate({"margin-left":"-"+i},500,function(){e.hide();d.removeClass("slidePanelOpen");d.addClass("slidePanelClosed");c.hide()})})};function getData_calendar(d,g,f,b){var e=$("#"+g);var c=e.attr("data-date");if(c){var a=new Date(c);return cal_f_tcalGenerateDate(a,b.dateFormat)}else{return null}}function setData_calendar(j,b,l,a,h,d){var g=$("#"+b);var e=null;var c=makeDataObject(h,l);if(c){if(c.rows&&c.rows.length>0){var k=c.rows[0][0];if(c.fields&&c.fields.length>0&&l){for(var f in e=c.fields){var m=c.fields[f];if(m&&m.toLowerCase()==l.toLowerCase()){k=c.rows[0][f];break}}}e=cal_f_tcalParseDate(k,a.dateFormat)}}if(e){g.attr("data-date",e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate());g.attr("data-year",e.getFullYear());g.attr("data-month",e.getMonth())}else{g.removeAttr("data-date")}calendarUpdate(b)}function getData_dataStore(c,g,f,b){var e=getDataStoreData(g,b,f);if(e){if(e.rows&&e.fields){if(e.rows[0]&&f){for(var a in e.fields){if(e.fields[a]&&e.fields[a].toLowerCase()==f.toLowerCase()){var d=e.rows[0][a];if(d!==undefined){return d}else{break}}}return null}else{return e}}else{if(f&&e[f]){return e[f]}else{return null
}}}return e}function setData_dataStore(c,f,e,a,d,b){if(a.id){f=a.id}if(d!=null&&d!==undefined){d=makeDataObject(d,e);saveDataStoreData(f,a,d)}else{saveDataStoreData(f,a,null)}}function getProperty_dataStore_selectedRowData(b,e,d,a){var c=getDataStoreData(e,a);if(c&&c.selectedRowNumber&&c.rows&&c.rows[c.selectedRowNumber-1]){return{fields:c.fields,rows:[c.rows[c.selectedRowNumber-1]]}}}function setProperty_dataStore_selectedRowData(d,g,f,b,e,c){var a=getDataStoreData(g,b);if(a&&a.selectedRowNumber&&a.rows&&a.rows.length>=a.selectedRowNumber){e=makeDataObject(e,f);if(e&&e.rows){a.rows[a.selectedRowNumber-1]=e.rows[0][0]}else{a.rows.splice(a.selectedRowNumber-1,1)}saveDataStoreData(g,b,a)}}function getProperty_dataStore_selectedRowNumber(b,e,d,a){var c=getDataStoreData(e,a);if(c){return c.selectedRowNumber}}function setProperty_dataStore_selectedRowNumber(d,g,f,b,e,c){var a=getDataStoreData(g,b);if(a){e=makeDataObject(e,f);if(e&&e.rows){a.selectedRowNumber=e.rows[0][0];saveDataStoreData(g,b,a)
}}}function getProperty_dataStore_rowCount(c,e,d,b){var a=getDataStoreData(e,b);if(a&&a.rows){return a.rows.length}}function setProperty_dataStore_append(e,h,g,c,f,d){var b=getDataStoreData(h,c);if(b){f=makeDataObject(f,g);if(f&&f.rows){if(!b.fields){b.fields=f.fields}if(!b.rows){b.rows=[]}for(var a in f.rows){b.rows.push(f.rows[a])}saveDataStoreData(h,c,b)}}}function getData_gallery(c,g,f,b){var d={fields:["url"],rows:[]};var e=$("#"+g);var a=e.children("img");a.each(function(j){var h=$(this).attr("src");d.rows.push([h])});return d}function setData_gallery(n,c,o,a,l,d){if(l!=null&&l!==undefined){var k=$("#"+c);l=makeDataObject(l,o);if(l.rows){k.find("span").remove();var f=0;if(l.fields){for(var h in l.fields){if(l.fields[h]=="url"||l.fields[h]=="urls"){f=h;break}}}for(var h in l.rows){var m=l.rows[h][f].split(",");for(var g in m){var b=m[g];if(b.indexOf("http")!=0){b="http://images/"+b}k.append("<img src='"+b+"'></img>");k.find("img").last().click(function(i){Gallery_removeImage(i,c)});
var e=window["Event_imageAdded_"+c];if(e){window["Event_imageAdded_"+c]()}}}}}}function getProperty_gallery_imageCount(b,d,c,a){return($("#"+d).children("img").size())}function getProperty_gallery_urls(c,g,f,b){var e="";var d=$("#"+g);var a=d.children("img");a.each(function(j){var h=$(this).attr("src");if(h){e+=h.replace("http://cache/","").replace("http://images/","");if(j<a.length-1){e+=","}}});if(e){return e}else{return null}}function getData_grid(k,c,l,a){var f=null;if(a){if(a.dataStorageType&&!$("#"+c)[0]){f=getGridDataStoreData(c,a);if(l&&f.fields&&f.rows&&f.rows.length>0){for(var g in f.fields){if(f.fields[g]&&f.fields[g].toLowerCase()==l.toLowerCase()){f=f.rows[0][g];break}}}}else{if(a.columns){if(l){var o=getGridSelectedRow(c,k);if(o[0]){for(var g in a.columns){if(a.columns[g].field&&a.columns[g].field.toLowerCase()==l.toLowerCase()){f=o.children(":nth("+g+")").html();break}}}if(f==null&&a.dataStorageType){var b=getGridDataStoreData(c,a);var h=getGridSelectedRowNumber(c,k);h--;
if(h>-1&&b.rows&&b.rows.length>h){for(var g in b.fields){if(b.fields[g]&&b.fields[g].toLowerCase()==l.toLowerCase()){f=b.rows[h][g];break}}}}}else{var f={};f.fields=[];for(var g in a.columns){var l=a.columns[g].field;if(l){f.fields.push(a.columns[g].field)}}f.rows=[];var m=$("#"+c);if(!m.is("table")){m=m.find("table").last()}m.find("tr:not(:first):not([data-ignore])").each(function(j){var p=[];$(this).children().each(function(q){if(a.columns[q].field){p.push($(this).html())}});f.rows.push(p)});if(a.dataStorageType){var b=getGridDataStoreData(c,a);if(b){var d={};for(var g in f.fields){var n=false;for(var e in b.fields){if(f.fields[g]&&b.fields[e]&&f.fields[g].toLowerCase()==b.fields[e].toLowerCase()){d[g]=e;n=true;break}}if(!n){b.fields.push(f.fields[g]);d[g]=b.fields.length-1}}for(var g in f.rows){if(b.rows.length<g-1){b.rows.push([])}while(b.rows[g].length<b.fields.length){b.rows[g].push(null)}for(e in d){b.rows[g][d[e]]=f.rows[g][e]}}f=b}}}}}}return f}function setData_grid(v,o,b,u,x,n){var h=$("#"+o);
if(!h.is("table")){h=h.find("table").last()}h.find("tr:not(:first-child)").remove();h.find("span.sort").html("&#xf0dc");if(x!==undefined){x=makeDataObject(x,b);if(x&&x.rows){if(u&&u.columns&&x.fields){var c=[];for(var s in u.columns){for(var r in x.fields){var m=false;if(u.columns[s].field&&x.fields[r]){if(u.columns[s].field.toLowerCase()==x.fields[r].toLowerCase()){m=true}}else{if(!x.fields[r]){m=true}}if(m){c.push(r);break}}if(c.length==s){c.push("")}if(u.columns[s].cellFunction&&!u.columns[s].f){u.columns[s].f=new Function(["id","data","field","details","value"],u.columns[s].cellFunction)}}for(var s in x.rows){var d=x.rows[s];var l=h.append("<tr class='rowStyle"+(s%2+1)+"'></tr>").find("tr:last");for(var r in u.columns){var t="";if(!u.columns[r].visible){t+="display:none;"}if(u.columns[r].style){t+=u.columns[r].style}if(t){t=" style='"+t+"'"}var q="";var p=c[r];if(p&&d[p]){q=d[c[r]]}var k=l.append("<td"+t+">"+q+"</td>").find("td:last");if(u.columns[r].f){u.columns[r].f.apply(k,[o,x,b,u,q])
}}if(x.rowValidation&&s<x.rowValidation.length){if(!x.rowValidation[s]){l.addClass("validation")}}}if(x.selectedRowNumber){h.find("tr:nth("+x.selectedRowNumber+")").addClass("rowSelect")}}else{for(var s in x.rows){var d=x.rows[s];var w="<tr>";for(var r in d){w+="<td>"+d[r]+"</td>"}w+="</tr>";h.append(w)}}}if(u&&u.dataStorageType){saveGridDataStoreData(o,u,x)}if(u&&u.scrollV&&u.scrollHeight){if(u.fixedHeader){if(!h.parent().is(".gridScrollBody")){var f=$("<div class='gridScrollBody' />");f.css({"max-height":u.scrollHeight,"overflow-y":u.scrollV});h.wrap(f);h.find("thead tr td").each(function(){$(this).attr("data-item-original-width",$(this).width())});h.find("tbody tr:eq(0) td").each(function(){$(this).attr("data-item-original-width",$(this).width())});var a=h.clone();a.attr("id",o+"header");a.parent().addClass("gridScroll");var g=h.parent();g.parent().prepend(a);g.insertAfter(a);a.wrap("<div class='gridScrollHeader' />");a.find("thead tr td").each(function(){$(this).width($(this).attr("data-item-original-width"))
});h.width(h.attr("data-item-original-width"));h.find("tbody tr:eq(0) td").each(function(){$(this).width($(this).attr("data-item-original-width"))});var e=a.find("tr:first-child").height();a.parent().css({height:e});h.css("margin-top",-e)}}else{if(!h.parent().is(".gridScrollApplied")){h.removeAttr("id");var f=$("<div class='gridScroll' id='"+o+"' />");f.css({height:u.scrollHeight,"overflow-y":u.scrollV});f.addClass("gridScrollApplied");h.wrap(f)}}}h.children().last().children("tr:not(:first)").click(function(){var i=$(this);i.parent().find("tr.rowSelect").removeClass("rowSelect");i.addClass("rowSelect")});$(window).resize()}}function getProperty_grid_selectedRowData(g,c,h,a){var e=null;if(a.dataStorageType){e=getGridDataStoreData(c,a);var b=$("#"+c);if(b[0]){var f=getGridSelectedRowNumber(c,g);if(f!=e.selectedRowNumber){e.selectedRowNumber=f;saveGridDataStoreData(c,a,e)}}if(e.selectedRowNumber){e.rows=[e.rows[e.selectedRowNumber-1]]}else{e.rows=[]}}else{var k=getGridSelectedRow(c,g);if(k[0]){e={fields:[],rows:[[]]};
for(var d in a.columns){e.fields.push(a.columns[d].field);e.rows[0].push(k.children(":nth("+d+")").html())}}}if(h&&e&&e.fields&&e.rows&&e.rows.length>0){var j=false;for(var d in e.fields){if(e.fields[d]&&e.fields[d].toLowerCase()==h.toLowerCase()){e=e.rows[0][d];j=true;break}}if(!j){e=null}}return e}function setProperty_grid_selectedRowData(m,c,n,a,h,d){gridData=getGridDataStoreData(c,a);if(!gridData){gridData={}}var b=$("#"+c);if(b[0]){var k=getGridSelectedRowNumber(c,m);if(k!=gridData.selectedRowNumber){gridData.selectedRowNumber=k;saveGridDataStoreData(c,a,gridData)}}h=makeDataObject(h,n);if(gridData.selectedRowNumber&&gridData.selectedRowNumber>0){if(h&&h.fields&&h.rows&&h.rows.length>0){var p=gridData.fields;if(p){var e={};for(var g in h.fields){var n=h.fields[g];var o=false;for(var f in gridData.fields){if(n.toLowerCase()==gridData.fields[f].toLowerCase()){e[n]=f;o=true;break}}if(!o){gridData.fields.push(n);e[n]=gridData.fields.length-1}}for(var g in h.fields){if(gridData.rows[gridData.selectedRowNumber-1].length<h.fields.length){gridData.rows[gridData.selectedRowNumber-1].push(null)
}gridData.rows[gridData.selectedRowNumber-1][e[h.fields[g]]]=h.rows[0][g]}}else{gridData.fields=h.fields;gridData.rows[gridData.selectedRowNumber-1]=h.rows[0]}}else{gridData.rows.splice(gridData.selectedRowNumber-1,1);if(gridData.rowValidation){gridData.rowValidation.splice(gridData.selectedRowNumber-1,1)}gridData.selectedRowNumber=null}if(a&&a.dataStorageType){if($("#"+c)[0]){setData_grid(m,c,n,a,gridData,d)}else{saveGridDataStoreData(c,a,gridData)}}}else{if(h){if(!gridData.rows){gridData.rows=[]}if(gridData.fields){var e={};for(var g in h.fields){var n=h.fields[g];var o=false;for(var f in gridData.fields){if(n.toLowerCase()==gridData.fields[f].toLowerCase()){e[n]=f;o=true;break}}if(!o){gridData.fields.push(n);e[n]=gridData.fields.length-1}}var q=[];while(q.length<gridData.fields.length){q.push(null)}for(var g in h.fields){var n=h.fields[g];var l=e[n];q[l]=h.rows[0][g]}gridData.rows.push(q)}else{gridData.fields=h.fields;gridData.rows.push(h.rows[0])}gridData.selectedRowNumber=gridData.rows.length;
saveGridDataStoreData(c,a,gridData);if(b[0]){setData_grid(m,c,null,a,gridData,d)}}}}function getProperty_grid_selectedRowValidation(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a.rowValidation&&a.selectedRowNumber){return a.rowValidation[a.selectedRowNumber-1]}}else{return getGridSelectedRowNumber(e,c)}}function setProperty_grid_selectedRowValidation(d,h,g,b,f,c){var f=makeDataObject(f,g);var e=null;var a=$("#"+h);if(a[0]){e=getGridSelectedRowNumber(h,d);if(f[0][0]){a.find("tr.rowSelect").removeClass("validation")}else{a.find("tr.rowSelect").addClass("validation")}}if(b&&b.dataStorageType){gridData=getGridDataStoreData(h,b);if(!gridData){gridData={}}if(e){gridData.selectedRowNumber=e}if(gridData.rows&&gridData.selectedRowNumber){if(!gridData.rowValidation){gridData.rowValidation=[]}while(gridData.rows.length>gridData.rowValidation){gridData.rowValidation.push(true)}gridData.rowValidation[gridData.selectedRowNumber-1]=f.rows[0][0];saveGridDataStoreData(h,b,gridData)
}}}function getProperty_grid_selectedRowNumber(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a&&a.selectedRowNumber){return a.selectedRowNumber}else{return null}}else{return getGridSelectedRowNumber(e,c)}}function setProperty_grid_selectedRowNumber(d,h,g,b,f,c){gridData=getGridDataStoreData(h,b);if(!gridData){gridData={fields:[],rows:[]}}f=makeDataObject(f,g);var e=null;var a=$("#"+h);if(a){a.find("tr.rowSelect").removeClass("rowSelect")}if(f){e=f.rows[0][0];if(a){a.find("tr:eq("+e+")").addClass("rowSelect")}}gridData.selectedRowNumber=e;saveGridDataStoreData(h,b,gridData)}function getProperty_grid_rowCount(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a&&a.rows){return a.rows.length}else{return 0}}else{return $("#"+e).find("tr").size()-1}}function getData_input(b,d,c,a){return $("#"+d).val()}function setData_input(g,b,h,a,f,c){var e=$("#"+b);var j="";if(f!=null&&f!==undefined){f=makeDataObject(f,h);if(f.rows&&f.rows[0]){if(h&&f.fields&&f.fields.length>0){for(var d in f.fields){if(f.fields[d]&&f.fields[d].toLowerCase()==h.toLowerCase()){j=f.rows[0][d];
break}}}else{if(f.rows[0][0]!=null&&f.rows[0][0]!==undefined){j=f.rows[0][0]}}}}e.val(j);if(e.is(".autoheight")){textarea_autoheight_size(e,true)}if(c){e.trigger("change")}}function setData_link(g,b,h,a,f,c){var e=$("#"+b);var j="";if(f!=null&&f!==undefined){f=makeDataObject(f,h);if(f.rows&&f.rows[0]){if(h&&f.fields&&f.fields.length>0){for(var d in f.fields){if(f.fields[d]&&f.fields[d].toLowerCase()==h.toLowerCase()){j=f.rows[0][d];break}}}else{if(f.rows[0][0]!=null&&f.rows[0][0]!==undefined){j=f.rows[0][0]}}}}e.attr("href",j)}function getProperty_map_mapCentre(l,d,m,a){var h=null;var b=_maps[d];if(b){h={fields:["lat","latitude","lng","longitude"],rows:[[]]};var c=b.getCenter();var j=c.lat();var k=c.lng();h.rows[0].push(j);h.rows[0].push(j);h.rows[0].push(k);h.rows[0].push(k);var e=new GT_WGS84();e.setDegrees(j,k);if(e.isGreatBritain()){var f=e.getOSGB();h.fields.push("east");h.fields.push("north");h.rows[0].push(f.eastings);h.rows[0].push(f.northings)}if(m){var n=-1;for(var g in h.fields){if(h.fields[g]&&m.toLowerCase()==h.fields[g].toLowerCase()){return h.rows[0][g]
}}return null}else{return h}}return h}function setProperty_map_mapCentre(c,h,f,a,d,b){var e=_maps[h];var d=makeDataObject(d,f);var g=getMapPosition(d,0,setMapCentre,e);if(e&&g&&g.lat&&g.lng){setMapCentre(e,g)}}function setProperty_map_addMarkers(c,g,f,a,d,b){var e=_maps[g];var d=makeDataObject(d,f);if(e&&d&&d.rows&&d.rows.length>0){if(!e.markers){e.markers=[]}addMapMarkers(e,d,a)}}function setProperty_map_replaceMarkers(d,h,g,b,e,c){var f=_maps[h];google.maps.event.trigger(f,"resize");var e=makeDataObject(e,g);if(f.markers){for(var a in f.markers){f.markers[a].setMap(null)}}f.markers=[];if(f&&e&&e.rows&&e.rows.length>0){addMapMarkers(f,e,b,e.rows.length-1)}}function getProperty_map_selectedMarker(h,c,j,a){var b=_maps[c];var d=b.markerSelectedIndex;if(b&&d>-1&&b.markers.length>d){var g=b.markers[d];var f=g.data;if(j){var k=-1;for(var e in f.fields){if(f.fields[e]&&j.toLowerCase()==f.fields[e].toLowerCase()){return f.rows[0][e]}}return null}else{return f}}else{return null}}function getData_responsivecheckbox(f,c,g,a){var d=$("#"+c);
var h=d.find("input:not([type=hidden])");var i=null;if(f.validation){var b=d.closest(".validated");if(!b[0]){b=d.parent()}b.find("input:not([type=hidden])").each(function(){if($(this).prop("checked")){i="true"}})}else{var e=h.attr("value");if(e){if(h.prop("checked")){i=e}}else{if(h.prop("checked")){i="true"}else{i="false"}}}return i}function setData_responsivecheckbox(h,b,j,a,e,c){var l=false;if(e!=null&&e!==undefined){e=makeDataObject(e,j);if(e.rows&&e.rows[0]){if(j&&e.fields){for(var f in e.fields){if(e.fields[f].toLowerCase()==j.toLowerCase()){l=e.rows[0][f];break}}}else{l=e.rows[0][0]}}}var d=$("#"+b);if(!d.is("input")){d=d.find("#"+b+"checkbox")}var g=d.attr("value");var k=false;if(g){if(l==g||(l==true&&g=="true")){k=true}}else{if(l&&!l=="false"){k=true}}d.prop("checked",k);if(c){d.trigger("change")}}function getData_responsivedate(b,d,c,a){return $("#"+d).find("input").val()}function setData_responsivedate(k,b,l,a,f,c){var m="";if(f!=null&&f!==undefined){f=makeDataObject(f,l);if(f.rows&&f.rows[0]){if(l&&f.fields&&f.fields.length>0){for(var g in f.fields){if(f.fields[g]&&f.fields[g].toLowerCase()==l.toLowerCase()){m=f.rows[0][g];
break}}}else{if(f.rows[0][0]!=null&&f.rows[0][0]!==undefined){m=f.rows[0][0]}}}}var e=$("#"+b);if(c){e.trigger("change")}e=e.find("input");a.dontTriggerChange=!c;try{var j=m;if(date_quickISORegex.test(m)){j=$.datepicker.parseDate("yy-mm-dd",m.substr(0,10))}else{if(date_quickOracleRegex.test(m)){j=$.datepicker.parseDate("dd-M-yy",m.substr(0,11))}}e.datepicker("setDate",j)}catch(h){e.datepicker("setDate",m)}a.dontTriggerChange=false}function getProperty_responsivedate_age(c,h,e,b){var g=$("#"+h).find("input");if(g.val()){var f=g.datepicker("getDate");var a=(Date.now()-f)/31557600000;return a}else{return null}}function getData_responsivedropdown(b,d,c,a){return $("#"+d).find("select").val()}function setData_responsivedropdown(h,b,k,a,g,c){if(g!==undefined){var f=$("#"+b).find("select");if(g==null){if(!k){f.children().remove()}}else{g=makeDataObject(g,k);if(g.rows&&g.fields){if(k&&g.rows[0]){var n=false;for(var e in g.fields){if(g.fields[e]&&k.toLowerCase()==g.fields[e].toLowerCase()){f.val(g.rows[0][e]);
if(c){f.trigger("change")}n=true;break}}if(!n){f.val(g.rows[0][0])}}else{for(var e in g.rows){var o=g.rows[e];var m="";var l=null;if(g.fields){for(var d in g.fields){if(g.fields[d]){if(g.fields[d].toLowerCase()=="text"){m=g.rows[e][d]}if(g.fields[d].toLowerCase()=="value"){l=g.rows[e][d]}}}}if(!m){m=o[0]}if(l==null&&o[1]){l=o[1]}if(l!=null){l="value='"+l+"'"}f.append("<option "+l+">"+m+"</option>")}}}}}}function setProperty_responsivedropdown_value(g,b,h,a,f,c){var f=makeDataObject(f,h);var e=$("#"+b).find("select");if(f&&f.rows){var j=false;if(h){for(var d in f.fields){if(f.fields[d]&&h.toLowerCase()==f.fields[d].toLowerCase()){e.val(f.rows[0][d]);j=true;break}}}if(!j){e.val(f.rows[0][0])}}else{e.val("")}if(c){e.trigger("change")}}function getData_responsiveinput(b,d,c,a){return $("#"+d).find("input,textarea").val()}function setData_responsiveinput(g,b,h,a,e,c){var j="";if(e!=null&&e!==undefined){e=makeDataObject(e,h);if(e.rows&&e.rows[0]){if(h&&e.fields&&e.fields.length>0){for(var f in e.fields){if(e.fields[f]&&e.fields[f].toLowerCase()==h.toLowerCase()){j=e.rows[0][f];
break}}}else{if(e.rows[0][0]!=null&&e.rows[0][0]!==undefined){j=e.rows[0][0]}}}}var d=$("#"+b);if(c){d.trigger("change")}d=d.find("input,textarea");d.val(j);if(d.is(".autoheight")){textarea_autoheight_size(d,true)}}function getData_responsiveradiobuttons(b,d,c,a){return $("#"+d).find("input[type=radio]:checked").val()}function setData_responsiveradiobuttons(h,b,j,a,e,c){if(e!=null&&e!==undefined){var g=$("#"+b);g.find("input[type=radio]").prop("checked",false);e=makeDataObject(e,j);var k=null;if(e.rows&&e.rows[0]){if(j&&e.fields){for(var d in e.fields){if(e.fields[d].toLowerCase()==j.toLowerCase()){k=e.rows[0][d];break}}}else{k=e.rows[0][0]}}if(k!==undefined){var f=g.find("input[type=radio][value='"+k+"']");if(f[0]){f.prop("checked",true)}else{g.find("input[type=radio]").prop("checked",false)}if(c){f.trigger("change")}}}}function getData_responsivetext(b,f,d,a){var c=$("#"+f);if(!c.is("[data-for=text]")){c=c.find("[data-for=text]")}var e=c.html();if(e=="&nbsp;"){e=""}return e}function setData_responsivetext(g,b,h,a,f,c){var e=$("#"+b);
var j="";if(f!=null&&f!==undefined){f=makeDataObject(f,h);if(f.rows&&f.rows[0]){if(h&&f.fields){for(var d in f.fields){if(f.fields[d]&&f.fields[d].toLowerCase()==h.toLowerCase()){j=f.rows[0][d];break}}}else{j=f.rows[0][0]}}}if(!e.is("[data-for=text]")){e=e.find("[data-for=text]")}if(!j){j="&nbsp;"}e.html(j)}function getData_signature(c,e,d,b){var a=_signatureControls[e];return a.toDataURL()}function setData_signature(d,g,f,b,e,c){var a=_signatureControls[g];var e=makeDataObject(e,f);if(e&&e.rows){a.fromDataURL(e.rows[0][0])}else{a.clear()}}function getData_text(b,d,c,a){return $("#"+d).html()}function setData_text(d,h,g,b,e,c){var f=$("#"+h);if(e!=null&&e!==undefined){e=makeDataObject(e,g);if(e.rows&&e.rows[0]){if(g&&e.fields){for(var a in e.fields){if(e.fields[a]&&e.fields[a].toLowerCase()==g.toLowerCase()){f.html(e.rows[0][a]);break}}}else{f.html(e.rows[0][0])}}else{f.html("")}}else{f.html("")}}function getProperty_flowLayoutCell_cellIndex(c,e,d,b){var a=$("#"+e).children("div.selected");
if(a[0]){return a.index()}else{return -1}};function Action_control(c){for(var a in c){var b=c[a];$("#"+b.id)[b["function"]](b.value)}}function Action_datacopy(C,E,l,q,r,n,d,A){if(E!==undefined&&l){for(var y in l){var o=l[y];var b=null;switch(r){case"append":case"row":var f=window["getData_"+o.type](C,o.id,null,o.details);E=makeDataObject(E,o.field);b=mergeDataObjects(f,E,r,d);break;case"child":var f=window["getData_"+o.type](C,o.id,null,o.details);if(E&&E.rows){b=mergeDataObjects(f,E,r,d)}else{b=f}break;case"search":if(E){b=mergeDataObjects(n,E,r,d,A)}break;case"trans":if(E&&E.fields&&E.rows){var p=false;if(E.rows.length>=A.keyFields.length+2){var h={};for(var y in E.fields){for(var x in A.keyFields){if(E.fields[y]&&A.keyFields[x]&&E.fields[y].toLowerCase()==A.keyFields[x].toLowerCase()){h[y]=x;break}}}if(Object.keys(h).length==A.keyFields.length&&E.fields.length>=A.keyFields.length+2){var D={};for(var y in E.rows){var w="";for(var x in h){w+=E.rows[y][h[x]]}if(D[w]){D[w]++}else{D[w]=1}if(D[w]>1){p=true;break}}}}if(p){var s=0;var v=1;
for(y in h){if(y*1==0){s=A.keyFields.length;v=A.keyFields.length+1}}var z=[];for(var y in A.keyFields){z.push(A.keyFields[y])}var a={};for(var y in E.rows){var m=E.rows[y];var d=m[s];var t=m[v];var w="";for(var x in h){w+=m[x]}var c=a[w];if(!c){c=[];for(var x in h){c.push(m[x])}a[w]=c}if(d){var e=-1;for(var x in z){if(z[x]==d){e=x;break}}if(e<0){z.push(d);e=z.length-1}}while(c.length<z.length){c.push(null)}c[e]=t}b={fields:z,rows:[]};for(var y in a){var m=a[y];while(m.length<z.length){m.push(null)}b.rows.push(m)}}else{b={fields:["field","value"],rows:[]};if(A&&A.keyFields&&A.keyFields.length>0){for(var x in A.keyFields){b.fields.push(A.keyFields[x])}}for(var y in E.rows){var g=[];if(A&&A.keyFields&&A.keyFields.length>0){for(var x in A.keyFields){for(var u in E.fields){if(E.fields[u]&&A.keyFields[x].toLowerCase()==E.fields[u].toLowerCase()){g.push(E.rows[y][u]);break}}}}for(var x in E.fields){var B=false;if(A&&A.ignoreFields&&A.ignoreFields.length>0){for(var u in A.ignoreFields){if(!E.fields[x]||E.fields[x].toLowerCase()==A.ignoreFields[u].toLowerCase()){B=true;
break}}}if(!B){var m=[E.fields[x],E.rows[y][x]];for(var u in g){m.push(g[u])}b.rows.push(m)}}}}}break;default:b=E}window["setData_"+o.type](C,o.id,o.field,o.details,b,q)}}}function Action_database(d,g,e,f,c){if(e&&f){if(c&&e.fields){for(var b in e.fields){if(e.fields[b]&&e.fields[b].toLowerCase()==c.toLowerCase()){e=e.rows[0][b];break}}}if(e){if(!e.sequence||e.sequence>getDatabaseActionMaxSequence(g)){if(e.sequence){_databaseActionMaxSequence[g]=e.sequence}for(var b in f){var a=f[b];window["setData_"+a.type](d,a.id,a.field,a.details,e)}}}}}function Action_mobile(b,a){alert("Callback for "+b+"."+a)}$(document).ready(function(){$(window).resize(function(a){var c=$(document);var b=$(window);$(".dialogueCover").css({width:c.width(),height:c.height()});$(".dialogue").each(function(){var d=$(this);var e=d.outerWidth(true);var f=d.outerHeight(true);if(e>0&&f>0){d.css({left:((window.innerWidth?window.innerWidth:b.width())-e)/2,top:((window.innerHeight?window.innerHeight:b.height())-f)/2})}})})});
function Action_navigate(c,a,d){if(a){var b="<div><h1 style='margin-left:auto;margin-right:auto;'>Page</h1></div>";$.ajax({url:c,type:"GET",data:null,async:false,error:function(f,e,g){alert("Error loading dialogue : "+f.responseText||g)},success:function(l){if(l){b="";script="";links="";var n=$("head");var m=$(l);for(var g in m){switch(m[g].nodeName){case"#text":case"TITLE":break;case"SCRIPT":if(m[g].innerHTML){var q=m[g].outerHTML;if(q.indexOf("var _appId =")==-1&&q.indexOf("var _appVersion =")==-1&&q.indexOf("var _pageId =")==-1&&q.indexOf("var _mobileResume =")==-1){script+=q}}else{var p=m[g].outerHTML;if(p.indexOf('src="')>0){var j=p.indexOf('src="')+5;var e=p.substr(j,p.indexOf('"',j)-j);if(!n.find("script[src='"+e+"']")[0]){try{n.append(p)}catch(k){}}}}break;case"LINK":var p=m[g].outerHTML;if(!m[g].innerHTML&&p.indexOf('href="')>0){var j=p.indexOf('href="')+6;var f=p.substr(j,p.indexOf('"',j)-j);if(!n.find("link[href='"+f+"']")[0]){n.append(p)}}break;case"META":break;default:if(m[g].outerHTML){b+=m[g].outerHTML
}break}}if(b.indexOf('<form name="login" id="RapidLogin" method="post">')>0){window.location="login.jsp?requestPath="+window.location}var o=$(document);var h=$("body");$("#"+d+"cover").remove();dialogueCover=h.append("<div id='"+d+"cover' class='dialogueCover' style='position:absolute;left:0px;top:0px;z-index:1000;'></div>").children().last();$("#"+d+"dialogue").remove();a=h.append("<div id='"+d+"dialogue' class='dialogue' style='position:fixed;z-index:1001;'></div>").children().last();a.css("visibility","hidden");if(links){a.append(links)}a.append(b);a.children().each(function(r){var s=$.fn.hide;$.fn.hide=function(){if(this.parent().is(a)){a.prev("div.dialogueCover").remove();a.remove();return false}else{return s.apply(this,arguments)}}});if(script){a.append(script)}a.find("textarea[maxlength]").each(textarea_maxlength);a.find("textarea.autoheight").each(textarea_autoheight).trigger("keypress");$(window).resize();h.find("input, select, textarea, button, a").not(a.find("input, select, textarea, button, a")).each(function(){var r=$(this);
var i=r.attr("tabindex");if(i>0){r.attr("data-tabindex",i)}$(this).attr("tabindex",-1)});window.setTimeout(function(){a.css("visibility","visible");if(window._rapidmobile){$(window).resize()}$("[data-focus]").focus()},200)}}})}else{window.location=c}}function Action_validation(l,c,q){var b=true;l.validation=true;for(var h in c){var e=c[h];var d=$("#"+e.controlId);if(d[0]){var g=null;if(e.validationProperty){g=window["getProperty_"+e.controlType+"_"+e.validationProperty]}else{g=window["getData_"+e.controlType]}if(g){var a=null;if(e.details){if(e.details.indexOf("{")==0){a=JSON.parse(a)}else{a=window[e.details]}}var n=g(l,e.controlId,e.field,a);if(e.validationType=="javascript"){var k=new Function(["ev","id","value"],e.javaScript);var p=k.apply(this,[l,e.controlId,n]);if(p!=null&&p!==false&&p!==undefined){if(q){showControlValidation(e.controlId,p)}b=false}else{if(q){hideControlValidation(e.controlId)}}}else{var o=false;if(n&&n!="false"){var f=e.regEx.trim();var m=new RegExp(f);if(f.indexOf("/i")==f.length-2){f=f.substr(0,f.length-2);
m=new RegExp(f,"i")}var j=n.match(m);if(j){if(j.length==1){o=true}else{for(var h in j){if(h!="index"&&h!="input"&&j[h]==n){o=true;break}}}}}else{if(e.allowNulls){o=true}}if(o||d.is(":disabled")||(d.is(":hidden")&&e.passHidden)){if(q){hideControlValidation(e.controlId)}}else{if(q&&!(l.type=="keyup"&&l.keyCode==9)){showControlValidation(e.controlId,e.message)}b=false}}}else{if(q){showControlValidation(e.controlId,e.message)}b=false}}}l.validation=false;return b}function Action_webservice(c,f,d,e){if(d&&e){if(d.sequence>getWebserviceActionMaxSequence(f)){_webserviceActionMaxSequence[f]=d.sequence;for(var b in e){var a=e[b];window["setData_"+a.type](c,a.id,a.field,a.details,d)}}}};