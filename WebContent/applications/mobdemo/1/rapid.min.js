function Event_error(a,c,b){if(c){alert("Error in "+a+" event for control "+c+"  "+b)}else{alert("Error in "+a+" event for page "+b)}}function getDataStoreData(e,a,d){var c;switch(a.storageType){case"L":if(!localStorage[_appId+"_"+e]){localStorage[_appId+"_"+e]="{}"}var b=localStorage[_appId+"_"+e];c=JSON.parse(b);break;case"S":if(!sessionStorage[_appId+"_"+e]){sessionStorage[_appId+"_"+e]="{}"}var b=sessionStorage[_appId+"_"+e];c=JSON.parse(b);break;case"P":if(!window[e+"datastore"]){window[e+"datastore"]={}}c=window[e+"datastore"];break}return c}function saveDataStoreData(d,a,c){switch(a.storageType){case"L":localStorage[_appId+"_"+d]=JSON.stringify(c);break;case"S":sessionStorage[_appId+"_"+d]=JSON.stringify(c);break;case"P":window[d+"datastore"]=c;break}var b=window["Event_change_"+d];if(b){b($.Event("change"))}}$(document).ready(function(){$(window).resize(function(a){sizeFlowLayouts()})});function sizeFlowLayouts(){$(".flowLayout").each(function(){var a=$(this);if(a.is(":visible")){sizeFlowLayout(a)
}})}function sizeFlowLayout(e){var b=e.width();var j=e.children(".flowLayoutCell");var a=window[e.attr("id")+"details"];j.css("width",a.cellWidth);var h=e.children(".flowLayoutCell").first();var c=h.width();var g=toPixels(h.css("margin-left"))+toPixels(h.css("margin-right"));var f=toPixels(h.css("padding-left"))+toPixels(h.css("padding-right"));var i=toPixels(h.css("border-left-width"))+toPixels(h.css("border-right-width"));var d=Math.min(Math.floor(b/c),j.length);c+=(b-d*c)/d-g-f-i;if($("body").css("transform")&&$("body").css("transform")!="auto"){if(b<=(c+g+f+i)*d){c-=1/d}}e.children(".flowLayoutCell").css("width",c)}function Gallery_removeImage(c,d){if(confirm("Remove image?")){var b=$(c.target);if(typeof _rapidmobile!="undefined"){_rapidmobile.removeImage(d,b.attr("src"))}b.remove();var a=window["Event_imageRemoved_"+d];if(a){window["Event_imageRemoved_"+d]()}}}function Gallery_showImage(e,f){var a=$("div.bigGallery");if(!a[0]){a=$("body").append("<div class='bigGallery'></div>").find("div.bigGallery")
}a.hide();var b=$(e.target);a.html("<img src='"+b.attr("src")+"'/>");var c=b.index();var d=window[f+"details"];if(d){a.append(d.captions[c])}}function getGridDataStoreData(c,a){data=null;switch(a.dataStorageType){case"L":var b=localStorage[_appId+c];if(b){data=JSON.parse(b)}break;case"S":var b=sessionStorage[_appId+c];if(b){data=JSON.parse(b)}break}return data}function saveGridDataStoreData(c,a,b){switch(a.dataStorageType){case"L":localStorage[_appId+c]=JSON.stringify(b);break;case"S":sessionStorage[_appId+c]=JSON.stringify(b);break}}function sortGridByColumn(h,b,a,c,j){var d=getData_grid(h,b,null,a);if(d&&d.rows&&d.fields[c]&&a.columns&&a.columns[c]){var k=[];for(var e in d.rows){k.push({index:e,value:d.rows[e][c]})}switch(a.columns[c].sort){case"n":k.sort(function(i,f){var n=i.value;if(n){n=parseFloat(n.replace(",",""))}var m=f.value;if(m){m=parseFloat(m.replace(",",""))}return n-m});break;case"d1":k.sort(function(n,f){var p=n.value.split("/");var m=f.value.split("/");if(!p||p.length<3){return 1
}else{if(!m||m.length<3){return -1}else{var o=new Date(p[2],p[1]-1,p[0]);var i=new Date(m[2],m[1]-1,m[0]);return o.getTime()-i.getTime()}}});break;case"d2":k.sort(function(o,i){var q=o.value.split("-");var n=i.value.split("-");if(!q||q.length<3){return 1}else{if(!n||n.length<3){return -1}else{var f=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];for(m1 in f){if(q[1].toLowerCase().substr(0,3)==f[m1]){break}}for(m2 in f){if(n[1].toLowerCase().substr(0,3)==f[m2]){break}}var p=new Date(q[2],m1,q[0]);var m=new Date(n[2],m2,n[0]);return p.getTime()-m.getTime()}}});break;case"d3":k.sort(function(n,f){var p=n.value.split("/");var m=f.value.split("/");if(!p||p.length<3){return 1}else{if(!m||m.length<3){return -1}else{var o=new Date(p[2],p[0]-1,p[1]);var i=new Date(m[2],m[0]-1,m[1]);return o.getTime()-i.getTime()}}});break;case"d1":k.sort(function(n,f){var p=n.value.split("-");var m=f.value.split("-");if(!p||p.length<3){return 1}else{if(!m||m.length<3){return -1}else{var o=new Date(p[0],p[1]-1,p[1]);
var i=new Date(m[0],m[1]-1,m[1]);return o.getTime()-i.getTime()}}});break;case"c":var g=new Function("item1","item2",a.columns[c].sortFunction);k.sort(g);break;default:k.sort(function(p,o){if(p.value==null){return 1}else{if(o.value==null){return -1}else{var n=0;v1=p.value.toLowerCase();v2=o.value.toLowerCase();if(v1!=v2){var f=Math.min(v1.length,v2.length);for(var m=0;m<f;m++){if(v1.charCodeAt(m)>v2.charCodeAt(m)){n=1;break}else{if(v1.charCodeAt(m)<v2.charCodeAt(m)){n=-1;break}}}if(n==0){n=v1.length-v2.length}}return n}}})}var l=[];if(j){for(var e in k){l.push(d.rows[k[e].index])}}else{for(var e in k){l.push(d.rows[k[k.length-e-1].index])}}d.rows=l;setData_grid(h,b,null,a,d)}}function sizeGridFixedHeaderColumns(e){if(!e.is("table")){e=e.find("table").last()}var g=false;if(!e.css("display")=="none"){g=true;e.parent().show()}var j=e.prev().find("tr:first-child").children(":visible");j.css("width","");var a=e.find("tr:nth-child(2)").children(":visible");if(a.length>0){j.css("min-width","0");
a.css("min-width","0");for(var f=0;f<a.length;f++){var h=$(j.get(f));var b=h.outerWidth();var d=$(a.get(f));var c=d.outerWidth();if(b<c){if(f==a.length-1){c=c-parseInt(h.css("padding-left"))-parseInt(h.css("padding-right"))}h.css("min-width",c)}else{if(b>c){if(f==a.length-1){b=b-parseInt(d.css("padding-left"))-parseInt(d.css("padding-right"))}d.css("min-width",b)}}}}if(g){e.parent().hide()}}function getGridSelecteRowNumber(b){var a=-1;a=$(b.target).closest("table").find("tr.rowStyle1,tr.rowStyle2").index($(b.target).closest("tr"));if(a>-1){a++}return a}function linkClick(b,f){var a=JSON.parse(f);for(var c in a){var d=a[c];if(d.type){var e=window["getData_"+d.type](null,d.itemId,d.field,d.details)}else{var e=$.getUrlVar(d.itemId)}if(e!==undefined){b+="&"+d.name+"="+e}}window.location=b}$(document).ready(function(){$(window).resize(function(c){if(typeof(window.parent._pageIframe)==="undefined"){var f=$(document);var a=$(".slidePanelPane");if(a[0]){a.css("height",f.height()-a.offset().top)
}var e=$(window);$(".slidePanelCover").css({width:e.width(),height:e.height()})}else{var d=window.parent._pageIframe;var b=window.parent._scale;$(".slidePanelCover").css({width:d.width()/b,height:d.height()/b})}})});var _databaseActionSequence=[];var _databaseActionMaxSequence=[];function getDatabaseActionSequence(b){var a=_databaseActionSequence[b];if(!a){a=0}a++;_databaseActionSequence[b]=a;return a}function getDatabaseActionMaxSequence(b){var a=_databaseActionMaxSequence[b];if(a===undefined){a=0;_databaseActionMaxSequence[b]=a}return a}function getDatabaseActionInputData(h,g,o,f){var d={};if(h){if(f&&f.fields&&f.rows&&f.fields.length>0&&f.rows.length>0){d.fields=[];for(var e in g){d.fields.push(o+"."+g[e])}d.rows=[];for(var e in f.rows){var c=f.rows[e];var p=[];for(var b in g){var m=g[b];var n=-1;for(var a in f.fields){if(m.toLowerCase()==f.fields[a].toLowerCase()){n=a;break}}if(n>-1){p.push(c[n])}else{p.push(null)}}d.rows.push(p)}}else{d.rows=[];d.rows.push([])}}else{d.fields=[];d.rows=[];
d.rows.push([]);for(var e in g){var l=g[e];d.fields.push(l.id);d.rows[0].push(l.value)}}return d}var _webserviceActionSequence=[];var _webserviceActionMaxSequence=[];function getWebserviceActionSequence(b){var a=_webserviceActionSequence[b];if(!a){a=0}a++;_webserviceActionSequence[b]=a;return a}function getWebserviceActionMaxSequence(b){var a=_webserviceActionMaxSequence[b];if(a===undefined){a=0;_webserviceActionMaxSequence[b]=a}return a};function Init_calendar(d,b){var c=$("#"+d);var a=new Date();c.attr("data-year",a.getFullYear());c.attr("data-month",a.getMonth());calendarUpdate(d)}function Init_flowLayout(b,a){$("#"+b).children("div").click(function(e){var d=$("#"+b);d.children("div").removeClass("selected");var c=$(this).addClass("selected").index()+1;d.children("div:nth-child("+c+")").addClass("selected")})}function Init_gallery(b,a){$("#"+b).children("img").click(function(e){var d=window[b+"details"];if(d){if(d.onImageClick=="large"){Gallery_showImage(e,b)}else{if(d.onImageClick=="caption"){var c=$(e.target).index();if(d.captions&&d.captions[c]){alert(d.captions[c])}}else{Gallery_removeImage(e,b)}}}})}function Init_grid(h,d){var f=$("#"+h);f.on("show",{control:f},function(i){sizeGridFixedHeaderColumns(i.data.control)});if(!f.is("table")){f=f.find("table").last()}if(d){if(d.columns){var g=f.find("tr:first-child td");for(var c in d.columns){if(d.columns[c].sort){var a=$(g.get(c));a.css("cursor","pointer");a.click({index:c},function(j){var i=$(j.target);
if(!i.is("span")){i=i.find("span")}if(i.html()=="\uf0de"){sortGridByColumn(j,h,d,j.data.index,false);i.html("&#xf0dd;")}else{sortGridByColumn(j,h,d,j.data.index,true);i.html("&#xf0de;")}})}}}if(d.dataStorageType){var e=getGridDataStoreData(h,d);if(e){setData_grid($.Event("gridinit"),h,null,d,e)}$("#"+h).click(function(i){var j=getGridDataStoreData(h,d);j.selectedRowNumber=getGridSelecteRowNumber(i);saveGridDataStoreData(h,d,j)})}if(d.fixedHeader){var b=f.clone(true);b.find("tr:not(:first-child)").remove();b.removeAttr("style");f.find("tr:first-child").hide();f.before(b)}}}function Init_hints(f,d){var a=$("body");for(var c in d.controlHints){var b=d.controlHints[c];if(!$("#"+b.controlId+"hint")[0]){var e=b.style;if(e){e=" style='"+e+"'"}else{e=""}a.append("<span class='hint' id='"+b.controlId+"hint'"+e+">"+b.text+"</span>");$("#"+b.controlId+"hint").hide()}$("#"+b.controlId).mouseout({controlId:b.controlId},function(g){$("#"+g.data.controlId+"hint").hide()});switch(b.type){case"click":$("#"+b.controlId).click({controlId:b.controlId},function(g){var j=$("#"+g.data.controlId+"hint");
j.show();var i=g.pageX+5;var h=g.pageY+5;if(g.pageX+5+j.outerWidth(true)>$(window).width()){i=g.pageX-j.outerWidth(true)-5}if(g.pageY+5+j.outerHeight(true)>$(window).height()){h=g.pageY-j.outerHeight(true)-5}j.css({left:i,top:h})});break;case"hover":$("#"+b.controlId).mouseover({controlId:b.controlId},function(g){var j=$("#"+g.data.controlId+"hint");j.show();var i=g.pageX+5;var h=g.pageY+5;if(g.pageX+5+j.outerWidth(true)>$(window).width()){i=g.pageX-j.outerWidth(true)-5}if(g.pageY+5+j.outerHeight(true)>$(window).height()){h=g.pageY-j.outerHeight(true)-5}j.css({left:i,top:h})});break}}}function Init_map(h,c){if(window.google){var e=parseInt(c.zoom);var a=google.maps.MapTypeId.ROADMAP;switch(c.mapType){case ("R"):a=google.maps.MapTypeId.ROADMAP;break;case ("S"):a=google.maps.MapTypeId.SATELLITE;break}var f=new google.maps.Map($("#"+h)[0],{zoom:e,center:new google.maps.LatLng(c.lat,c.lng),mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE]},mapTypeId:a,mapTypeControl:c.showMapType,zoomControl:c.showZoom,panControl:c.showPan,streetViewControl:c.showStreetView,scaleControl:c.showScale});
_maps[h]=f;f.setOptions({styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});var b=window["Event_mapClick_"+h];if(b){google.maps.event.addListener(f,"click",function(){b($.Event("mapClick"))})}var g=window["Event_dragStart_"+h];if(g){google.maps.event.addListener(f,"dragstart",function(){g($.Event("drag"))})}var d=window["Event_dragEnd_"+h];if(d){google.maps.event.addListener(f,"dragend",function(){d($.Event("drag"))})}}else{$("#"+h).html("Map not available")}}function Init_pagePanel(c,b){if(b.simple===undefined||!b.simple){var a="<center><h1>Page</h1></center>";$.ajax({url:"~?a="+_appId+"&v="+_appVersion+"&p="+b.pageId+"&action=dialogue",type:"GET",data:null,error:function(g,d,f){var e="Error loading page : "+f},success:function(h){if(h){var k=$("head");a="";script="";var j=$(h);for(var f in j){switch(j[f].nodeName){case"#text":case"TITLE":case"META":break;case"SCRIPT":if(j[f].innerHTML){var m=j[f].outerHTML;if(m.indexOf("var _appId =")==-1&&m.indexOf("var _appVersion =")==-1&&m.indexOf("var _pageId =")==-1&&m.indexOf("var _mobileResume =")==-1){script+=m
}}else{var l=j[f].outerHTML;if(l.indexOf('src="')>0){var g=l.indexOf('src="')+5;var d=l.substr(g,l.indexOf('"',g)-g);if(!k.find("script[src='"+d+"']")[0]){k.append(l)}}}break;case"LINK":var l=j[f].outerHTML;if(!j[f].innerHTML&&l.indexOf('href="')>0){var g=l.indexOf('href="')+6;var e=l.substr(g,l.indexOf('"',g)-g);if(!k.find("link[href='"+e+"']")[0]){k.append(l)}}break;default:if(j[f].outerHTML){a+=j[f].outerHTML}break}}$("#"+c).html(a);if(script){$("#"+c).append(script)}$(window).resize()}}})}}function Init_slidePanel(h,b){var a=$("body");var c=a.find(".slidePanelCover");if(!c[0]){a.append("<div class='slidePanelCover'></div>");c=a.find(".slidePanelCover");var g=$(document);c.css({width:g.width(),height:g.height()})}var d=$("#"+h);var f=d.attr("data-pane");var e=$("#"+f);if(e.is(":visible")){c.show()}else{c.hide()}d.click({width:e.css("width"),left:e.css("margin-left")},function(j){var i=j.data.width;var k=j.data.left;if(e.is(":visible")){e.animate({"margin-left":"-"+i},500,function(){e.hide();
d.removeClass("slidePanelOpen");d.addClass("slidePanelClosed");c.hide()})}else{e.css({"margin-left":"-"+i}).show();e.animate({"margin-left":0},500);d.removeClass("slidePanelClosed");d.addClass("slidePanelOpen");c.show()}});c.click({width:e.css("width"),left:e.css("margin-left")},function(j){var i=j.data.width;var k=j.data.left;e.animate({"margin-left":"-"+i},500,function(){e.hide();d.removeClass("slidePanelOpen");d.addClass("slidePanelClosed");c.hide()})})}function Init_tabGroup(b,a){$("#"+b).children("ul").children("li").each(function(){var c=$("#"+b);horizontal=true;if(window[b+"details"]&&window[b+"details"].tabType=="V"){horizontal=false}if(horizontal){c.children("ul").addClass("tabsHeaderH")}else{c.children("ul").addClass("tabsHeaderV")}$(this).click(function(e,d){c.children("ul").children("li").removeClass("selected");c.children("div").removeClass("selected").css("display","none");var d=$(this).addClass("selected").index()+2;c.children("div:nth-child("+d+")").addClass("selected");
if(horizontal){c.children("div.selected").css("display","block")}else{c.children("div.selected").css("display","table-cell")}})})};function getData_calendar(d,g,f,b){var e=$("#"+g);var c=e.attr("data-date");if(c){var a=new Date(c);return cal_f_tcalGenerateDate(a,b.dateFormat)}else{return null}}function setData_calendar(j,b,m,a,h,d){var g=$("#"+b);var e=null;var c=makeDataObject(h,m);if(c){if(c.rows&&c.rows.length>0){var l=c.rows[0][0];if(c.fields&&c.fields.length>0&&m){for(var f in e=c.fields){var n=c.fields[f];if(n&&n.toLowerCase()==m.toLowerCase()){l=c.rows[0][f];break}}}e=cal_f_tcalParseDate(l,a.dateFormat)}}if(e){g.attr("data-date",e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate());g.attr("data-year",e.getFullYear());g.attr("data-month",e.getMonth())}else{g.removeAttr("data-date")}calendarUpdate(b)}function getData_checkbox(b,d,c,a){return $("#"+d).prop("checked")?"true":"false"}function setData_checkbox(g,b,h,a,f,c){var e=$("#"+b);var j=false;if(f!=null&&f!==undefined){f=makeDataObject(f,h);if(f.rows&&f.rows[0]){if(h&&f.fields){for(var d in f.fields){if(f.fields[d].toLowerCase()==h.toLowerCase()){j=f.rows[0][d];
break}}}else{j=f.rows[0][0]}}}if(j=="false"){j=false}e.prop("checked",j);if(c){e.trigger("change")}}function getData_dataStore(c,g,f,b){var e=getDataStoreData(g,b,f);if(e){if(e.rows&&e.fields){if(e.rows[0]&&f){for(var a in e.fields){if(e.fields[a]&&e.fields[a].toLowerCase()==f.toLowerCase()){var d=e.rows[0][a];if(d!==undefined){return d}else{break}}}return null}else{return e}}else{if(f&&e[f]){return e[f]}else{return null}}}return e}function setData_dataStore(c,f,e,a,d,b){if(a.id){f=a.id}if(d!=null&&d!==undefined){d=makeDataObject(d,e);saveDataStoreData(f,a,d)}else{saveDataStoreData(f,a,null)}}function getProperty_dataStore_selectedRowData(b,e,d,a){var c=getDataStoreData(e,a);if(c&&c.selectedRowNumber&&c.rows&&c.rows[c.selectedRowNumber-1]){return{fields:c.fields,rows:[c.rows[c.selectedRowNumber-1]]}}}function setProperty_dataStore_selectedRowData(d,g,f,b,e,c){var a=getDataStoreData(g,b);if(a&&a.selectedRowNumber){e=makeDataObject(e,f);if(e&&e.rows){a.rows[a.selectedRowNumber]=e.rows[0][0];
saveDataStoreData(g,b,a)}}}function getProperty_dataStore_selectedRowNumber(b,e,d,a){var c=getDataStoreData(e,a);if(c){return c.selectedRowNumber}}function setProperty_dataStore_selectedRowNumber(d,g,f,b,e,c){var a=getDataStoreData(g,b);if(a){e=makeDataObject(e,f);if(e&&e.rows){a.selectedRowNumber=e.rows[0][0];saveDataStoreData(g,b,a)}}}function getProperty_dataStore_rowCount(c,e,d,b){var a=getDataStoreData(e,b);if(a&&a.rows){return a.rows.length}}function setProperty_dataStore_append(e,h,g,c,f,d){var b=getDataStoreData(h,c);if(b){f=makeDataObject(f,g);if(f&&f.rows){if(!b.fields){b.fields=f.fields}if(!b.rows){b.rows=[]}for(var a in f.rows){b.rows.push(f.rows[a])}saveDataStoreData(h,c,b)}}}function getData_dropdown(b,d,c,a){return $("#"+d).val()}function setData_dropdown(h,b,l,a,g,c){if(g!=null&&g!==undefined){var f=$("#"+b);g=makeDataObject(g,l);if(g.rows&&g.fields){if(l&&g.rows[0]){var o=false;for(var e in g.fields){if(l.toLowerCase()==g.fields[e].toLowerCase()){f.val(g.rows[0][e]);if(c){f.trigger("change")
}o=true;break}}if(!o){f.val(g.rows[0][0])}}else{for(var e in g.rows){var p=g.rows[e];var n="";var m=null;if(g.fields){for(var d in g.fields){if(g.fields[d].toLowerCase()=="text"){n=g.rows[e][d]}if(g.fields[d].toLowerCase()=="value"){m=g.rows[e][d]}}}if(!n){n=p[0]}if(m==null&&p[1]){m=p[1]}if(m!=null){m="value='"+m+"'"}f.append("<option "+m+">"+n+"</option>")}}}}}function setProperty_dropdown_value(c,g,f,a,d,b){var d=makeDataObject(d,f);var e=$("#"+g);if(d&&d.rows){e.val(d.rows[0][0])}else{e.val("")}if(b){e.trigger("change")}}function getData_gallery(c,g,f,b){var d={fields:["url"],rows:[]};var e=$("#"+g);var a=e.children("img");a.each(function(j){var h=$(this).attr("src");d.rows.push([h])});return d}function setData_gallery(o,c,p,a,m,d){if(m!=null&&m!==undefined){var l=$("#"+c);m=makeDataObject(m,p);if(m.rows){l.find("span").remove();var f=0;if(m.fields){for(var h in m.fields){if(m.fields[h]=="url"||m.fields[h]=="urls"){f=h;break}}}for(var h in m.rows){var n=m.rows[h][f].split(",");for(var g in n){var b=n[g];
if(b.indexOf("http")!=0){b="http://images/"+b}l.append("<img src='"+b+"'></img>");l.find("img").last().click(function(i){Gallery_removeImage(i,c)});var e=window["Event_imageAdded_"+c];if(e){window["Event_imageAdded_"+c]()}}}}}}function getProperty_gallery_imageCount(b,d,c,a){return($("#"+d).children("img").size())}function getProperty_gallery_urls(c,g,f,b){var e="";var d=$("#"+g);var a=d.children("img");a.each(function(j){var h=$(this).attr("src");if(h){e+=h.replace("http://cache/","").replace("http://images/","");if(j<a.length-1){e+=","}}});if(e){return e}else{return null}}function getData_grid(l,c,m,b){var f=null;if(b){if(b.dataStorageType&&!$("#"+c)[0]){f=getGridDataStoreData(c,b);if(m&&f.fields&&f.rows&&f.rows.length>0){for(var g in f.fields){if(f.fields[g]==m){f=f.rows[0][g];break}}}}else{if(b.columns){if(m){var o=$("#"+c).find("tr.rowSelect");var h=getGridSelecteRowNumber(l);if(h>0){for(var g in b.columns){if(b.columns[g].field&&b.columns[g].field.toLowerCase()==m.toLowerCase()){f=o.children(":nth("+g+")").html();
break}}}if(f==null&&b.dataStorageType){var a=getGridDataStoreData(c,b);if(a.rows>h){for(var g in a.fields){if(a.fields[g]&&a.fields[g].toLowerCase()==m.toLowerCase()){f=a.rows[h][g];break}}}}}else{var f={};f.fields=[];for(var g in b.columns){var m=b.columns[g].field;if(m){f.fields.push(b.columns[g].field)}}f.rows=[];var n=$("#"+c);if(!n.is("table")){n=n.find("table").last()}n.find("tr:not(:first):not([data-ignore])").each(function(j){var p=[];$(this).children().each(function(q){if(b.columns[q].field){p.push($(this).html())}});f.rows.push(p)});if(b.dataStorageType){var a=getGridDataStoreData(c,b);if(a){var d={};for(var g in f.fields){for(var e in a.fields){if(f.fields[g]&&a.fields[e]&&f.fields[g].toLowerCase()==a.fields[e].toLowerCase()){d[g]=e;break}}}for(var g in f.rows){if(a.rows.length<g-1){a.rows.push([]);for(k in a.fields){a.rows[g].push(null)}}for(e in d){a.rows[g][d[e]]=f.rows[g][e]}}f=a}}}}}}return f}function setData_grid(s,l,a,r,u,h){var d=$("#"+l);d.find("tr:not(:first-child)").remove();
d.find("span.sort").html("&#xf0dc");if(!d.is("table")){d=d.find("table").last()}if(u!==undefined){u=makeDataObject(u,a);if(u&&u.rows){if(r&&r.columns&&u.fields){var b=[];for(var p in r.columns){for(var o in u.fields){var g=false;if(r.columns[p].field&&u.fields[o]){if(r.columns[p].field.toLowerCase()==u.fields[o].toLowerCase()){g=true}}else{if(!u.fields[o]){g=true}}if(g){b.push(o);break}}if(b.length==p){b.push("")}if(r.columns[p].cellFunction&&!r.columns[p].f){r.columns[p].f=new Function(["id","data","field","details","value"],r.columns[p].cellFunction)}}for(var p in u.rows){var c=u.rows[p];var f=d.append("<tr class='rowStyle"+(p%2+1)+"'></tr>").find("tr:last");for(var o in r.columns){var q="";if(!r.columns[o].visible){q+="display:none;"}if(r.columns[o].style){q+=r.columns[o].style}if(q){q=" style='"+q+"'"}var n="";var m=b[o];if(m&&c[m]){n=c[b[o]]}var e=f.append("<td"+q+">"+n+"</td>").find("td:last");if(r.columns[o].f){r.columns[o].f.apply(e,[l,u,a,r,n])}}if(u.rowValidation&&p<u.rowValidation.length){if(!u.rowValidation[p]){f.addClass("validation")
}}}if(u.selectedRowNumber){d.find("tr:nth("+u.selectedRowNumber+")").addClass("rowSelect")}}else{for(var p in u.rows){var c=u.rows[p];var t="<tr>";for(var o in c){t+="<td>"+c[o]+"</td>"}t+="</tr>";d.append(t)}}}if(r&&r.dataStorageType){saveGridDataStoreData(l,r,u)}if(r&&r.fixedHeader){sizeGridFixedHeaderColumns(d)}d.children().last().children("tr:not(:first)").click(function(){var i=$(this);i.parent().find("tr.rowSelect").removeClass("rowSelect");i.addClass("rowSelect")})}}function getProperty_grid_selectedRowData(f,b,g,a){var c=null;if(a.dataStorageType){c=getGridDataStoreData(b,a);if(c.selectedRowNumber){c.rows=[c.rows[c.selectedRowNumber-1]]}else{c.rows=[]}}else{var j=$(f.target).closest("tr");var e=getGridSelecteRowNumber(f);if(e>0){c={fields:[],rows:[[]]};for(var d in a.columns){c.fields.push(a.columns[d].field);c.rows[0].push(j.children(":nth("+d+")").html())}}}if(g&&c.fields&&c.rows&&c.rows.length>0){var h=false;for(var d in c.fields){if(c.fields[d]&&c.fields[d].toLowerCase()==g.toLowerCase()){c=c.rows[0][d];
h=true;break}}if(!h){c=null}}return c}function setProperty_grid_selectedRowData(l,b,m,a,g,c){gridData=getGridDataStoreData(b,a);if(!gridData){gridData={}}g=makeDataObject(g,m);if(gridData.selectedRowNumber){if(g&&g.fields&&g.rows&&g.rows.length>0){var o=gridData.fields;if(o){var d={};for(var f in g.fields){var m=g.fields[f];var n=false;for(var e in gridData.fields){if(m.toLowerCase()==gridData.fields[e].toLowerCase()){d[m]=e;n=true;break}}if(!n){gridData.fields.push(m);d[m]=gridData.fields.length-1}}for(var f in g.fields){if(gridData.rows[gridData.selectedRowNumber-1].length<g.fields.length){gridData.rows[gridData.selectedRowNumber-1].push(null)}gridData.rows[gridData.selectedRowNumber-1][d[g.fields[f]]]=g.rows[0][f]}}else{gridData.fields=g.fields;gridData.rows[gridData.selectedRowNumber-1]=g.rows[0]}}else{gridData.rows.splice(gridData.selectedRowNumber-1,1);if(gridData.rowValidation){gridData.rowValidation.splice(gridData.selectedRowNumber-1,1)}gridData.selectedRowNumber=null}if(a&&a.dataStorageType){if($("#"+b)[0]){setData_grid(l,b,m,a,gridData,c)
}else{saveGridDataStoreData(b,a,gridData)}}}else{if(g){if(!gridData.rows){gridData.rows=[]}if(gridData.fields){var d={};for(var f in g.fields){var m=g.fields[f];var n=false;for(var e in gridData.fields){if(m.toLowerCase()==gridData.fields[e].toLowerCase()){d[m]=e;n=true;break}}if(!n){gridData.fields.push(m);d[m]=gridData.fields.length-1}}var p=[];while(p.length<gridData.fields.length){p.push(null)}for(var f in g.fields){var m=g.fields[f];var h=d[m];p[h]=g.rows[0][f]}gridData.rows.push(p)}else{gridData.fields=g.fields;gridData.rows.push(g.rows[0])}gridData.selectedRowNumber=gridData.rows.length;saveGridDataStoreData(b,a,gridData)}}}function getProperty_grid_selectedRowValidation(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a.rowValidation&&a.selectedRowNumber){return a.rowValidation[a.selectedRowNumber-1]}}else{return getGridSelecteRowNumber(c)}}function setProperty_grid_selectedRowValidation(d,h,g,b,f,c){var f=makeDataObject(f,g);var e=null;var a=$("#"+h);if(a[0]){e=getGridSelecteRowNumber(d);
if(f[0][0]){a.find("tr.rowSelect").removeClass("validation")}else{a.find("tr.rowSelect").addClass("validation")}}if(b&&b.dataStorageType){gridData=getGridDataStoreData(h,b);if(!gridData){gridData={}}if(e){gridData.selectedRowNumber=e}if(gridData.rows&&gridData.selectedRowNumber){if(!gridData.rowValidation){gridData.rowValidation=[]}while(gridData.rows.length>gridData.rowValidation){gridData.rowValidation.push(true)}gridData.rowValidation[gridData.selectedRowNumber-1]=f.rows[0][0];saveGridDataStoreData(h,b,gridData)}}}function getProperty_grid_selectedRowNumber(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a&&a.selectedRowNumber){return a.selectedRowNumber}else{return null}}else{return getGridSelecteRowNumber(c)}}function setProperty_grid_selectedRowNumber(d,h,g,b,f,c){gridData=getGridDataStoreData(h,b);if(!gridData){gridData={fields:[],rows:[]}}f=makeDataObject(f,g);var e=null;var a=$("#"+h);if(a){a.find("tr.rowSelect").removeClass("rowSelect")}if(f){e=f.rows[0][0];
if(a){a.find("tr:eq("+e+")").addClass("rowSelect")}}gridData.selectedRowNumber=e;saveGridDataStoreData(h,b,gridData)}function getProperty_grid_rowCount(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a&&a.rows){return a.rows.length}else{return 0}}else{return $("#"+e).find("tr").size()-1}}function getData_input(b,d,c,a){return $("#"+d).val()}function setData_input(g,b,h,a,f,c){var e=$("#"+b);var j="";if(f!=null&&f!==undefined){f=makeDataObject(f,h);if(f.rows&&f.rows[0]){if(h&&f.fields&&f.fields.length>0){for(var d in f.fields){if(f.fields[d]&&f.fields[d].toLowerCase()==h.toLowerCase()){j=f.rows[0][d];break}}}else{if(f.rows[0][0]!=null&&f.rows[0][0]!==undefined){j=f.rows[0][0]}}}}e.val(j);if(c){e.trigger("change")}}function getProperty_map_mapCentre(c,g,f,a){var d={fields:["lat","lng"],rows:[[]]};var e=_maps[g];if(e){var b=e.getCenter();d.rows[0].push(b.lat());d.rows[0].push(b.lng())}return d}function setProperty_map_mapCentre(c,h,f,a,d,b){var e=_maps[h];var d=makeDataObject(d,f);
var g=getMapPosition(d,0,setMapCentre,e);if(e&&g&&g.lat&&g.lng){setMapCentre(e,g)}}function setProperty_map_addMarkers(c,g,f,a,d,b){var e=_maps[g];var d=makeDataObject(d,f);if(e&&d&&d.rows&&d.rows.length>0){if(!e.markers){e.markers=[]}addMapMarkers(e,d,a)}}function setProperty_map_replaceMarkers(d,h,g,b,e,c){var f=_maps[h];google.maps.event.trigger(f,"resize");var e=makeDataObject(e,g);if(f.markers){for(var a in f.markers){f.markers[a].setMap(null)}}f.markers=[];if(f&&e&&e.rows&&e.rows.length>0){addMapMarkers(f,e,b,e.rows.length-1)}}function getProperty_map_selectedMarker(h,c,j,a){var b=_maps[c];var d=b.markerSelectedIndex;if(b&&d>-1&&b.markers.length>d){var g=b.markers[d];var f=g.data;if(j){var l=-1;for(var e in f.fields){if(j==f.fields[e]){return f.rows[0][e]}}return null}else{return f}}else{return null}}function getData_radiobuttons(b,d,c,a){return $("#"+d).children("input[type=radio]:checked").val()}function setData_radiobuttons(h,b,j,a,e,c){if(e!=null&&e!==undefined){var g=$("#"+b);
g.children("input[type=radio]").prop("checked",false);e=makeDataObject(e,j);var l=null;if(e.rows&&e.rows[0]){if(j&&e.fields){for(var d in e.fields){if(e.fields[d].toLowerCase()==j.toLowerCase()){l=e.rows[0][d];break}}}else{l=e.rows[0][0]}}if(l!==undefined){var f=g.children("input[type=radio][value='"+l+"']");if(f[0]){f.prop("checked",true)}else{g.children("input[type=radio]").prop("checked",false)}if(c){f.trigger("change")}}}}function getData_text(b,d,c,a){return $("#"+d).html()}function setData_text(d,h,g,b,e,c){var f=$("#"+h);if(e!=null&&e!==undefined){e=makeDataObject(e,g);if(e.rows&&e.rows[0]){if(g&&e.fields){for(var a in e.fields){if(e.fields[a]&&e.fields[a].toLowerCase()==g.toLowerCase()){f.html(e.rows[0][a]);break}}}else{f.html(e.rows[0][0])}}else{f.html("")}}else{f.html("")}}function getProperty_flowLayoutCell_cellIndex(c,e,d,b){var a=$("#"+e).children("div.selected");if(a[0]){return a.index()}else{return -1}};function Action_control(c){for(var a in c){var b=c[a];$("#"+b.id)[b["function"]](b.value)}}function Action_datacopy(C,E,l,q,r,n,d,A){if(E!==undefined&&l){for(var y in l){var o=l[y];var b=null;switch(r){case"append":case"row":var f=window["getData_"+o.type](C,o.id,null,o.details);E=makeDataObject(E,o.field);b=mergeDataObjects(f,E,r,d);break;case"child":var f=window["getData_"+o.type](C,o.id,null,o.details);if(E&&E.rows){b=mergeDataObjects(f,E,r,d)}else{b=f}break;case"search":if(E){b=mergeDataObjects(n,E,r,d,A)}break;case"trans":if(E&&E.fields&&E.rows){var p=false;if(E.rows.length>=A.keyFields.length+2){var h={};for(var y in E.fields){for(var x in A.keyFields){if(E.fields[y]&&A.keyFields[x]&&E.fields[y].toLowerCase()==A.keyFields[x].toLowerCase()){h[y]=x;break}}}if(Object.keys(h).length==A.keyFields.length&&E.fields.length>=A.keyFields.length+2){var D={};for(var y in E.rows){var w="";for(var x in h){w+=E.rows[y][h[x]]}if(D[w]){D[w]++}else{D[w]=1}if(D[w]>1){p=true;break}}}}if(p){var s=0;var v=1;
for(y in h){if(y*1==0){s=A.keyFields.length;v=A.keyFields.length+1}}var z=[];for(var y in A.keyFields){z.push(A.keyFields[y])}var a={};for(var y in E.rows){var m=E.rows[y];var d=m[s];var t=m[v];var w="";for(var x in h){w+=m[x]}var c=a[w];if(!c){c=[];for(var x in h){c.push(m[x])}a[w]=c}if(d){var e=-1;for(var x in z){if(z[x]==d){e=x;break}}if(e<0){z.push(d);e=z.length-1}}while(c.length<z.length){c.push(null)}c[e]=t}b={fields:z,rows:[]};for(var y in a){var m=a[y];while(m.length<z.length){m.push(null)}b.rows.push(m)}}else{b={fields:["field","value"],rows:[]};if(A&&A.keyFields&&A.keyFields.length>0){for(var x in A.keyFields){b.fields.push(A.keyFields[x])}}for(var y in E.rows){var g=[];if(A&&A.keyFields&&A.keyFields.length>0){for(var x in A.keyFields){for(var u in E.fields){if(E.fields[u]&&A.keyFields[x].toLowerCase()==E.fields[u].toLowerCase()){g.push(E.rows[y][u]);break}}}}for(var x in E.fields){var B=false;if(A&&A.ignoreFields&&A.ignoreFields.length>0){for(var u in A.ignoreFields){if(!E.fields[x]||E.fields[x].toLowerCase()==A.ignoreFields[u].toLowerCase()){B=true;
break}}}if(!B){var m=[E.fields[x],E.rows[y][x]];for(var u in g){m.push(g[u])}b.rows.push(m)}}}}}break;default:b=E}window["setData_"+o.type](C,o.id,o.field,o.details,b,q)}}}function Action_database(c,f,d,e){if(d&&e){if(d.sequence>getDatabaseActionMaxSequence(f)){_databaseActionMaxSequence[f]=d.sequence;for(var b in e){var a=e[b];window["setData_"+a.type](c,a.id,a.field,a.details,d)}}}}function Action_mobile(b,a){alert("Callback for "+b+"."+a)}$(document).ready(function(){$(window).resize(function(a){var c=$(document);var b=$(window);$(".dialogueCover").css({width:c.width(),height:c.height()});$(".dialogue").each(function(){var d=$(this);d.css({left:((window.innerWidth?window.innerWidth:b.width())-d.outerWidth(true))/2,top:((window.innerHeight?window.innerHeight:b.height())-d.outerHeight(true))/2})})})});function Action_navigate(c,a,d){if(a){var b="<div><h1 style='margin-left:auto;margin-right:auto;'>Page</h1></div>";$.ajax({url:c,type:"GET",data:null,async:false,error:function(f,e,g){alert("Error loading dialogue : "+f.responseText||g)
},success:function(l){if(l){b="";script="";links="";var n=$("head");var m=$(l);for(var g in m){switch(m[g].nodeName){case"#text":case"TITLE":break;case"SCRIPT":if(m[g].innerHTML){var q=m[g].outerHTML;if(q.indexOf("var _appId =")==-1&&q.indexOf("var _appVersion =")==-1&&q.indexOf("var _pageId =")==-1&&q.indexOf("var _mobileResume =")==-1){script+=q}}else{var p=m[g].outerHTML;if(p.indexOf('src="')>0){var j=p.indexOf('src="')+5;var e=p.substr(j,p.indexOf('"',j)-j);if(!n.find("script[src='"+e+"']")[0]){try{n.append(p)}catch(k){}}}}break;case"LINK":var p=m[g].outerHTML;if(!m[g].innerHTML&&p.indexOf('href="')>0){var j=p.indexOf('href="')+6;var f=p.substr(j,p.indexOf('"',j)-j);if(!n.find("link[href='"+f+"']")[0]){n.append(p)}}break;case"META":break;default:if(m[g].outerHTML){b+=m[g].outerHTML}break}}if(b.indexOf('<form name="login" id="RapidLogin">')>0){window.location="login.jsp?requestPath="+window.location}var o=$(document);var h=$("body");$("#"+d+"cover").remove();dialogueCover=h.append("<div id='"+d+"cover' class='dialogueCover' style='position:absolute;left:0px;top:0px;z-index:1000;'></div>").children().last();
$("#"+d+"dialogue").remove();a=h.append("<div id='"+d+"dialogue' class='dialogue' style='position:fixed;z-index:1001;'></div>").children().last();a.css("visibility","hidden");if(links){a.append(links)}a.append(b);a.children().each(function(r){var s=$.fn.hide;$.fn.hide=function(){if(this.parent().is(a)){a.prev("div.dialogueCover").remove();a.remove();return false}else{return s.apply(this,arguments)}}});if(script){a.append(script)}a.find("textarea[maxlength]").each(textarea_maxlength);a.find("textarea.autoheight").each(textarea_autoheight).trigger("keypress");$(window).resize();window.setTimeout(function(){a.css("visibility","visible");if(window._rapidmobile){$(window).resize()}$("[data-focus]").focus()},200)}}})}else{window.location=c}}function Action_validation(k,b,p){var a=true;for(var g in b){var d=b[g];var c=$("#"+d.controlId);if(c[0]){var f=null;if(d.validationProperty){f=window["getProperty_"+d.controlType+"_"+d.validationProperty]}else{f=window["getData_"+d.controlType]}if(f){var m=f(k,d.controlId,d.field,d.details);
if(d.validationType=="javascript"){var j=new Function(["ev","id","value"],d.javaScript);var o=j.apply(this,[k,d.controlId,m]);if(o!=null&&o!==false&&o!==undefined){if(p){showControlValidation(d.controlId,o)}a=false}else{if(p){hideControlValidation(d.controlId)}}}else{var n=false;if(m&&m!="false"){var e=d.regEx.trim();var l=new RegExp(e);if(e.indexOf("/i")==e.length-2){e=e.substr(0,e.length-2);l=new RegExp(e,"i")}var h=m.match(l);if(h){if(h.length==1){n=true}else{for(var g in h){if(g!="index"&&g!="input"&&h[g]==m){n=true;break}}}}}else{if(d.allowNulls){n=true}}if(n||(c.is(":hidden")&&d.passHidden)){if(p){hideControlValidation(d.controlId)}}else{if(p&&!(k.type=="keyup"&&k.keyCode==9)){showControlValidation(d.controlId,d.message)}a=false}}}else{if(p){showControlValidation(d.controlId,d.message)}a=false}}}return a}function Action_webservice(c,f,d,e){if(d&&e){if(d.sequence>getWebserviceActionMaxSequence(f)){_webserviceActionMaxSequence[f]=d.sequence;for(var b in e){var a=e[b];window["setData_"+a.type](c,a.id,a.field,a.details,d)
}}}};