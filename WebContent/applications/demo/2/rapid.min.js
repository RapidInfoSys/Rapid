function Action_control(c){for(var a in c){var b=c[a];$("#"+b.id)[b["function"]](b.value)}}function Action_datacopy(f,d,j,b,k,h){if(d!=null&&d!==undefined&&j){for(var e in j){var a=j[e];var g=null;switch(b){case"append":if(!a.details){a.details={}}a.details.append=true;g=d;break;case"row":var c=window["getData_"+a.type](f,a.id,null,a.details);d=makeDataObject(d,a.field);g=mergeDataObjects(c,d,b,h);break;case"child":var c=window["getData_"+a.type](f,a.id,null,a.details);g=mergeDataObjects(c,d,b,h);break;case"search":g=mergeDataObjects(k,d,b,h);break;default:g=d}window["setData_"+a.type](a.id,g,a.field,a.details)}}}function Action_database(e,c,d){if(c&&d){if(c.sequence>getDatabaseActionMaxSequence(e)){_databaseActionMaxSequence[e]=c.sequence;for(var b in d){var a=d[b];window["setData_"+a.type](a.id,c,a.field,a.details)}}}}$(document).ready(function(){$(window).resize(function(a){var c=$(document);var b=$(window);$(".dialogueCover").css({width:c.width(),height:c.height()});$(".dialogue").each(function(){var d=$(this);
d.css({left:(b.width()-d.outerWidth())/2,top:(b.height()-d.outerHeight())/3})})})});function Action_navigate(c,a,d){if(a){var b="<div><h1 style='margin-left:auto;margin-right:auto;'>Page</h1></div>";$.ajax({url:c,type:"GET",data:null,async:false,error:function(f,e,g){alert("Error loading dialogue : "+f.responseText||g)},success:function(l){if(l){b="";script="";links="";var m=$(l);for(var g in m){switch(m[g].nodeName){case"#text":case"TITLE":break;case"SCRIPT":if(m[g].innerHTML){script+=m[g].outerHTML}break;case"LINK":var f=true;var o=m[g].outerHTML;if(!m[g].innerHTML&&o.indexOf('href="')>0){var k=o.indexOf('href="')+6;var e=o.substr(k,o.indexOf('"',k)-k);if($("head").find("link[href='"+e+"']")[0]){f=false}}if(f){links+=o}break;case"META":break;default:if(m[g].outerHTML){b+=m[g].outerHTML}break}}if(b.indexOf('<form name="login" id="RapidLogin">')>0){window.location="login.jsp?requestPath="+window.location}var n=$(document);var h=$("body");$("#"+d+"cover").remove();dialogueCover=h.append("<div id='"+d+"cover' class='dialogueCover' style='position:absolute;left:0px;top:0px;z-index:100;'></div>").children().last();
$("#"+d+"dialogue").remove();a=h.append("<div id='"+d+"dialogue' class='dialogue' style='position:absolute;z-index:101;'></div>").children().last();a.css("visibility","hidden");if(links){a.append(links)}a.append(b);a.children().on("hide",function(){var i=$(this).closest("div.dialogue");i.prev("div.dialogueCover").remove();i.remove()});$.each(["show","hide"],function(p,r){var q=$.fn[r];$.fn[r]=function(){this.trigger(r);return q.apply(this,arguments)}});if(script){a.append(script)}var j=$(window);$(window).resize();window.setTimeout(function(){a.css("visibility","visible");if(window._rapidmobile){$(window).resize()}},200)}}})}else{window.location=c}}function Action_validation(g,b,k){var a=true;for(var e in b){var d=b[e];var c=$("#"+d.controlId);if(c[0]){if(!c.is(":hidden")||!d.passHidden){var h=window["getData_"+d.controlType](g,d.controlId,d.field,d.details);if(d.validationType=="javascript"){var f=new Function(["ev","id","value"],d.javaScript);var j=f.apply(this,[g,d.controlId,h]);if(j!=null&&j!==false&&j!==undefined){if(k){showValidation(d.controlId,j)
}a=false}else{if(k){hideValidation(d.controlId)}}}else{if((h&&h.match(new RegExp(d.regEx)))||(!h&&d.allowNulls)){if(k){hideValidation(d.controlId)}}else{if(k){showValidation(d.controlId,d.message)}a=false}}}}}return a}function Action_webservice(e,c,d){if(c&&d){if(c.sequence>getWebserviceActionMaxSequence(e)){_webserviceActionMaxSequence[e]=c.sequence;for(var b in d){var a=d[b];window["setData_"+a.type](a.id,c,a.field,a.details)}}}}function Init_date(b,a){A_TCALCONF.format=a.dateFormat;f_tcalAdd(b)}function Init_grid(c,a){if(a&&a.dataStorageType){var b=getGridDataStoreData(c,a);if(b){setData_grid(c,b,null,a)}$("#"+c).click(function(d){var e=getGridDataStoreData(c,a);e.selectedRowNumber=$(d.target).closest("tr").index();saveGridDataStoreData(c,a,e)})}}function Init_hints(f,d){var a=$("body");for(var c in d.controlHints){var b=d.controlHints[c];if(!$("#"+b.controlId+"hint")[0]){var e=b.style;if(e){e=" style='"+e+"'"}else{e=""}a.append("<span class='hint' id='"+b.controlId+"hint'"+e+">"+b.text+"</span>");
$("#"+b.controlId+"hint").hide()}$("#"+b.controlId).mouseout({controlId:b.controlId},function(g){$("#"+g.data.controlId+"hint").hide()});switch(b.type){case"click":$("#"+b.controlId).click({controlId:b.controlId},function(g){$("#"+g.data.controlId+"hint").css({left:g.pageX+5,top:g.pageY+5}).show()});break;case"hover":$("#"+b.controlId).mouseover({controlId:b.controlId},function(g){$("#"+g.data.controlId+"hint").css({left:g.pageX+5,top:g.pageY+5}).show()});break}}}function Init_pagePanel(c,b){var a="<center><h1>Page</h1></center>";$.ajax({url:"~?a="+b.appId+"&v="+b.version+"&p="+b.pageId,type:"GET",data:null,error:function(g,d,f){var e="Error loading page : "+f},success:function(f){if(f){a="";script="";var d=$(f);for(var e in d){switch(d[e].nodeName){case"#text":case"TITLE":break;case"SCRIPT":if(d[e].innerHTML){script+=d[e].outerHTML}break;default:if(d[e].outerHTML){a+=d[e].outerHTML}break}}$("#"+c).html(a);if(script){$("#"+c).append(script)}$(window).resize()}}})}function Init_tabGroup(b,a){$("#"+b).children("ul").children("li").each(function(){var c=$("#"+b);
horizontal=true;if(window[b+"details"]&&window[b+"details"].tabType=="V"){horizontal=false}if(horizontal){c.children("ul").addClass("tabsHeaderH")}else{c.children("ul").addClass("tabsHeaderV")}$(this).click(function(e,d){c.children("ul").children("li").removeClass("selected");c.children("div").removeClass("selected").css("display","none");var d=$(this).addClass("selected").index()+2;c.children("div:nth-child("+d+")").addClass("selected");if(horizontal){c.children("div.selected").css("display","block")}else{c.children("div.selected").css("display","table-cell")}})})}function getData_checkbox(b,d,c,a){return $("#"+d).prop("checked")?"true":"false"}function setData_checkbox(f,c,e,b){var d=$("#"+f);if(c!=null&&c!==undefined){c=makeDataObject(c,e);if(c.rows&&c.rows[0]){if(e&&c.fields){for(var a in c.fields){if(c.fields[a].toLowerCase()==e.toLowerCase()){d.prop("checked",c.rows[0][a]);d.trigger("change");break}}}else{d.prop("checked",c.rows[0][0]);d.trigger("change")}}else{d.prop("checked",false);
d.trigger("change")}}else{d.prop("checked",false);d.trigger("change")}}function getData_dataStore(c,f,e,b){var d=getDataStoreData(f,b,e);if(d){if(d.rows&&d.fields){if(d.rows[0]&&e){for(var a in d.fields){if(d.fields[a].toLowerCase()==e.toLowerCase()){return d.rows[0][a]}}return null}else{return d}}else{if(e&&d[e]){return d[e]}}}return d}function setData_dataStore(d,b,c,a){if(a.id){d=a.id}if(b!=null&&b!==undefined){b=makeDataObject(b,c);saveDataStoreData(d,a,b)}else{saveDataStoreData(d,a,null)}}function getProperty_dataStore_selectedRowData(b,e,d,a){var c=getDataStoreData(e,a);if(c&&c.selectedRowNumber&&c.rows&&c.rows[c.selectedRowNumber-1]){return{fields:c.fields,rows:[c.rows[c.selectedRowNumber-1]]}}}function setProperty_dataStore_selectedRowData(c,f,e,b,d){var a=getDataStoreData(f,b);if(a&&a.selectedRowNumber){d=makeDataObject(d,e);if(d&&d.rows){a.rows[a.selectedRowNumber]=d.rows[0][0];saveDataStoreData(f,b,a)}}}function getProperty_dataStore_selectedRowNumber(b,e,d,a){var c=getDataStoreData(e,a);
if(c){return c.selectedRowNumber}}function setProperty_dataStore_selectedRowNumber(c,f,e,b,d){var a=getDataStoreData(f,b);if(a){d=makeDataObject(d,e);if(d&&d.rows){a.selectedRowNumber=d.rows[0][0];saveDataStoreData(f,b,a)}}}function getProperty_dataStore_rowCount(c,e,d,b){var a=getDataStoreData(e,b);if(a&&a.rows){return a.rows.length}}function setProperty_dataStore_append(d,g,f,c,e){var b=getDataStoreData(g,c);if(b){e=makeDataObject(e,f);if(e&&e.rows){if(!b.fields){b.fields=e.fields}if(!b.rows){b.rows=[]}for(var a in e.rows){b.rows.push(e.rows[a])}saveDataStoreData(g,c,b)}}}function getData_date(b,d,c,a){return $("#"+d).val()}function setData_date(h,e,g,c){var f=$("#"+h);var d="";if(e!=null&&e!==undefined){e=makeDataObject(e,g);if(e.rows&&e.rows[0]){if(g&&e.fields){for(var b in e.fields){if(e.fields[b].toLowerCase()==g.toLowerCase()){d=e.rows[0][b];break}}}else{d=e.rows[0][0]}}}if(d){var a=f_tcalParseDate(d,"Y-m-d");if(a){d=f_tcalGenerateDate(a,c.dateFormat)}}f.val(d);f.trigger("change")
}function getData_dropdown(b,d,c,a){return $("#"+d).val()}function setData_dropdown(b,e,g,a){if(e!=null&&e!==undefined){var d=$("#"+b);e=makeDataObject(e,g);if(e.rows&&e.fields){if(g&&e.rows[0]){var l=false;for(var f in e.fields){if(g.toLowerCase()==e.fields[f].toLowerCase()){d.val(e.rows[0][f]);d.trigger("change");l=true;break}}if(!l){d.val(e.rows[0][0])}}else{for(var f in e.rows){var m=e.rows[f];var k="";var h="";if(e.fields){for(var c in e.fields){if(e.fields[c].toLowerCase()=="text"){k=e.rows[f][c]}if(e.fields[c].toLowerCase()=="value"){h=e.rows[f][c]}}}if(!k){k=m[0]}if(!h&&m[1]){h=m[1]}if(h||h=="0"){h=" value='"+h+"'"}d.append("<option "+h+">"+k+"</option>")}}}}}function getData_grid(c,h,e,b){var d=null;if(b){if(b.dataStorageType){d=getGridDataStoreData(h,b)}else{if(b.columns){if(e){var f=$(c.target).closest("tr");var g=f.index()-1;if(g>=0){for(var a in b.columns){if(b.columns[a].field.toLowerCase()==e.toLowerCase()){d=f.children(":nth("+a+")").html();break}}}}else{var d={};d.fields=[];
for(var a in b.columns){d.fields.push(b.columns[a].field)}d.rows=[];$("#"+h).find("tr:not(:first)").each(function(j){var k=[];$(this).children().each(function(l){k.push($(this).html())});d.rows.push(k)})}}}}return d}function setData_grid(d,k,o,a){var h=$("#"+d);h.find("tr:not(:first)").remove();if(k!=null&&k!==undefined){k=makeDataObject(k,o);if(k.rows){if(a&&a.columns&&k.fields){var n=[];for(var l in a.columns){for(var g in k.fields){var r=false;if(a.columns[l].field){if(a.columns[l].field.toLowerCase()==k.fields[g].toLowerCase()){r=true}}else{if(!k.fields[g]){r=true}}if(r){n.push(g);break}}if(n.length==l){n.push("")}if(a.columns[l].cellFunction&&!a.columns[l].f){a.columns[l].f=new Function(a.columns[l].cellFunction)}}for(var l in k.rows){var q=k.rows[l];var m=h.append("<tr class='rowStyle"+(l%2+1)+"'></tr>").find("tr:last");for(var g in a.columns){var b="";if(!a.columns[g].visible){b+="display:none;"}if(a.columns[g].style){b+=a.columns[g].style}if(b){b=" style='"+b+"'"}var p="";var e=n[g];
if(e&&q[e]){p=q[n[g]]}var c=m.append("<td"+b+">"+p+"</td>").find("td:last");if(a.columns[g].f){a.columns[g].f.apply(c,[d,k,o,a])}}if(k.rowValidation&&l<k.rowValidation.length){if(!k.rowValidation[l]){m.addClass("validation")}}}if(k.selectedRowNumber){h.find("tr:nth("+k.selectedRowNumber+")").addClass("rowSelect")}}else{for(var l in k.rows){var q=k.rows[l];var f="<tr>";for(var g in q){f+="<td>"+q[g]+"</td>"}f+="</tr>";h.append(f)}}if(a.dataStorageType){saveGridDataStoreData(d,a,k)}}h.children().last().children("tr:not(:first)").click(function(){var i=$(this);i.parent().find("tr.rowSelect").each(function(){var j=$(this);j.removeClass("rowSelect")});i.addClass("rowSelect")})}}function getProperty_grid_selectedRowData(d,h,f,c){var e=null;if(c.dataStorageType){e=getGridDataStoreData(h,c);e.rows=[e.rows[e.selectedRowNumber-1]]}else{var g=$(d.target).closest("tr");var a=g.index();if(a>0){e={fields:[],rows:[[]]};for(var b in c.columns){e.fields.push(c.columns[b].field);e.rows[0].push(g.children(":nth("+b+")").html())
}}}return e}function setProperty_grid_selectedRowData(g,b,h,a,e){gridData=getGridDataStoreData(b,a);if(!gridData){gridData={}}e=makeDataObject(e,h);if(gridData.selectedRowNumber){if(e){var l=gridData.fields;if(l){var c={};for(var f in e.fields){var h=e.fields[f];var k=false;for(var d in gridData.fields){if(h.toLowerCase()==gridData.fields[d].toLowerCase()){c[h]=d;k=true;break}}if(!k){gridData.fields.push(h);c[h]=gridData.fields.length-1}}for(var f in e.fields){if(gridData.rows[gridData.selectedRowNumber-1].length<e.fields.length){gridData.rows[gridData.selectedRowNumber-1].push(null)}gridData.rows[gridData.selectedRowNumber-1][c[e.fields[f]]]=e.rows[0][f]}}else{gridData.fields=e.fields;gridData.rows[gridData.selectedRowNumber-1]=e.rows[0]}}else{gridData.rows.splice(gridData.selectedRowNumber-1,1);if(gridData.rowValidation){gridData.rowValidation.splice(gridData.selectedRowNumber-1,1)}gridData.selectedRowNumber=null}saveGridDataStoreData(b,a,gridData)}else{if(e){if(!gridData.fields){gridData.fields=e.fields
}if(!gridData.rows){gridData.rows=[]}gridData.rows.push(e.rows[0]);gridData.selectedRowNumber=gridData.rows.length;saveGridDataStoreData(b,a,gridData)}}}function getProperty_grid_selectedRowValidation(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);if(a.rowValidation&&a.selectedRowNumber){return a.rowValidation[a.selectedRowNumber-1]}}else{return $(c.target).closest("tr").index()}}function setProperty_grid_selectedRowValidation(c,g,f,b,e){var e=makeDataObject(e,f);var d=null;var a=$("#"+g);if(a[0]){d=a.find("tr.rowSelect").index();if(e[0][0]){a.find("tr.rowSelect").removeClass("validation")}else{a.find("tr.rowSelect").addClass("validation")}}if(b&&b.dataStorageType){gridData=getGridDataStoreData(g,b);if(!gridData){gridData={}}if(d){gridData.selectedRowNumber=d}if(gridData.rows&&gridData.selectedRowNumber){if(!gridData.rowValidation){gridData.rowValidation=[]}while(gridData.rows.length>gridData.rowValidation){gridData.rowValidation.push(true)}gridData.rowValidation[gridData.selectedRowNumber-1]=e.rows[0][0];
saveGridDataStoreData(g,b,gridData)}}}function getProperty_grid_selectedRowNumber(c,e,d,b){if(b&&b.dataStorageType){var a=getGridDataStoreData(e,b);return a.selectedRowNumber}else{return $(c.target).closest("tr").index()}}function setProperty_grid_selectedRowNumber(b,f,e,a,d){gridData=getGridDataStoreData(f,a);if(!gridData){gridData={}}d=makeDataObject(d,e);var c=null;if(d){c=d.rows[0][0]}gridData.selectedRowNumber=c;saveGridDataStoreData(f,a,gridData)}function getProperty_grid_rowCount(b,d,c,a){return $("#"+d).find("tr").size()-1}function getData_input(b,d,c,a){return $("#"+d).val()}function setData_input(f,c,e,b){var d=$("#"+f);if(c!=null&&c!==undefined){c=makeDataObject(c,e);if(c.rows&&c.rows[0]){if(e&&c.fields&&c.fields.length>0){for(var a in c.fields){if(c.fields[a]&&c.fields[a].toLowerCase()==e.toLowerCase()){d.val(c.rows[0][a]);d.trigger("change");break}}}else{if(c.rows[0][0]!=null&&c.rows[0][0]!==undefined){d.val(c.rows[0][0]);d.trigger("change")}else{d.val("");d.trigger("change")
}}}else{d.val("");d.trigger("change")}}else{d.val("");d.trigger("change")}}function getData_radiobuttons(b,d,c,a){return $("#"+d).children("input[type=radio]:checked").val()}function setData_radiobuttons(h,f,g,c){if(f!=null&&f!==undefined){var e=$("#"+h);e.children("input[type=radio]").prop("checked",false);f=makeDataObject(f,g);var d=null;if(f.rows&&f.rows[0]){if(g&&f.fields){for(var b in f.fields){if(f.fields[b].toLowerCase()==g.toLowerCase()){d=f.rows[0][b];break}}}else{d=f.rows[0][0]}}if(d){var a=e.children("input[type=radio][value="+d+"]");if(a[0]){a.prop("checked",true);a.trigger("change")}}}}function getData_text(b,d,c,a){return $("#"+d).html()}function setData_text(f,c,e,b){var d=$("#"+f);if(c!=null&&c!==undefined){c=makeDataObject(c,e);if(c.rows&&c.rows[0]){if(e&&c.fields){for(var a in c.fields){if(c.fields[a]&&c.fields[a].toLowerCase()==e.toLowerCase()){d.html(c.rows[0][a]);break}}}else{d.html(c.rows[0][0])}}else{d.html("")}}else{d.html("")}}function Event_error(a,c,b){if(c){alert("Error in "+a+" event for control "+c+"  "+b)
}else{alert("Error in "+a+" event for page "+b)}}function getDataStoreData(e,a,d){var c;switch(a.storageType){case"L":if(!localStorage[_appId+"_"+e]){localStorage[_appId+"_"+e]="{}"}var b=localStorage[_appId+"_"+e];c=JSON.parse(b);break;case"S":if(!sessionStorage[_appId+"_"+e]){sessionStorage[_appId+"_"+e]="{}"}var b=sessionStorage[_appId+"_"+e];c=JSON.parse(b);break;case"P":if(!window[e+"datastore"]){window[e+"datastore"]={}}c=window[e+"datastore"];break}return c}function saveDataStoreData(c,a,b){switch(a.storageType){case"L":localStorage[_appId+"_"+c]=JSON.stringify(b);break;case"S":sessionStorage[_appId+"_"+c]=JSON.stringify(b);break;case"P":window[c+"datastore"]=b;break}}function getGridDataStoreData(c,a){data=null;switch(a.dataStorageType){case"L":var b=localStorage[_appId+c];if(b){data=JSON.parse(b)}break;case"S":var b=sessionStorage[_appId+c];if(b){data=JSON.parse(b)}break}return data}function saveGridDataStoreData(c,a,b){switch(a.dataStorageType){case"L":localStorage[_appId+c]=JSON.stringify(b);
break;case"S":sessionStorage[_appId+c]=JSON.stringify(b);break}}function linkClick(b,f){var a=JSON.parse(f);for(var c in a){var d=a[c];if(d.type){var e=window["getData_"+d.type](null,d.itemId,d.field,d.details)}else{var e=$.getUrlVar(d.itemId)}if(e!==undefined){b+="&"+d.name+"="+e}}window.location=b}var _databaseActionSequence=[];var _databaseActionMaxSequence=[];function getDatabaseActionSequence(b){var a=_databaseActionSequence[b];if(!a){a=0}a++;_databaseActionSequence[b]=a;return a}function getDatabaseActionMaxSequence(b){var a=_databaseActionMaxSequence[b];if(a===undefined){a=0;_databaseActionMaxSequence[b]=a}return a}var _webserviceActionSequence=[];var _webserviceActionMaxSequence=[];function getWebserviceActionSequence(b){var a=_webserviceActionSequence[b];if(!a){a=0}a++;_webserviceActionSequence[b]=a;return a}function getWebserviceActionMaxSequence(b){var a=_webserviceActionMaxSequence[b];if(a===undefined){a=0;_webserviceActionMaxSequence[b]=a}return a};