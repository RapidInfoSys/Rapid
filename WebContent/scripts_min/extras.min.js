if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.prototype.replaceAll=function(find,replace){return this.split(find).join(replace)};$.extend({getUrlVars:function(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);if(hash[1]){vars[hash[0]]=decodeURIComponent(hash[1].replace("#",""))}}return vars},getUrlVar:function(name){return $.getUrlVars()[name]}});$.fn.extend({enable:function(){this.removeAttr("disabled");return this},disable:function(){this.attr("disabled","disabled");return this},showLoading:function(){var loadingCover=$("div[data-id="+this.attr("id")+"]");if(!loadingCover[0]){this.after("<div class='loading' data-id='"+this.attr("id")+"'></div><span class='loading' data-id='"+this.attr("id")+"'></span>");loadingCover=$("div[data-id="+this.attr("id")+"]")}loadingCover.css({left:this.offset().left,top:this.offset().top,width:this.outerWidth(),height:this.outerHeight()}).show();
if(this.outerWidth()>0){var image=loadingCover.next();image.css({left:this.offset().left+(this.outerWidth()-image.outerWidth())/2,top:this.offset().top+(this.outerHeight()-image.outerHeight())/2}).show()}return this},hideLoading:function(){$("body").find("div[data-id="+this.attr("id")+"]").hide().next().hide();return this},hideDialogue:function(reload){var dialogue=$(this).closest("div.dialogue");dialogue.prev("div.dialogueCover").remove();dialogue.remove();if(reload){var pageId=$("body").attr("id");if(window["Event_pageload_"+pageId]){window["Event_pageload_"+pageId]()}}}});(function($){$.fn.caret=function(pos){var target=this[0];var isContentEditable=target.contentEditable==="true";if(arguments.length==0){if(window.getSelection){if(isContentEditable){target.focus();var range1=window.getSelection().getRangeAt(0),range2=range1.cloneRange();range2.selectNodeContents(target);range2.setEnd(range1.endContainer,range1.endOffset);return range2.toString().length}return target.selectionStart}if(document.selection){target.focus();
if(isContentEditable){var range1=document.selection.createRange(),range2=document.body.createTextRange();range2.moveToElementText(target);range2.setEndPoint("EndToEnd",range1);return range2.text.length}var pos=0,range=target.createTextRange(),range2=document.selection.createRange().duplicate(),bookmark=range2.getBookmark();range.moveToBookmark(bookmark);while(range.moveStart("character",-1)!==0){pos++}return pos}return 0}if(pos==-1){pos=this[isContentEditable?"text":"val"]().length}if(window.getSelection){if(isContentEditable){target.focus();window.getSelection().collapse(target.firstChild,pos)}else{target.setSelectionRange(pos,pos)}}else{if(document.body.createTextRange){var range=document.body.createTextRange();range.moveToElementText(target);range.moveStart("character",pos);range.collapse(true);range.select()}}if(!isContentEditable){target.focus()}return pos}})(jQuery);jQuery(function($){var ignore=[8,9,13,33,34,35,36,37,38,39,40,46];var eventName="keypress";$("textarea[maxlength]").on(eventName,function(event){var self=$(this),maxlength=self.attr("maxlength"),code=$.data(this,"keycode");
if(maxlength&&maxlength>0){return(self.val().length<maxlength||$.inArray(code,ignore)!==-1)}}).on("keydown",function(event){$.data(this,"keycode",event.keyCode||event.which)})});if(window._rapidmobile){console.log("Rapid Mobile detected");var ajax=$.ajax;$.ajax=function(settings){if(settings.data){settings.url+="&data="+encodeURIComponent(settings.data);settings.data=null}var success=settings.success;settings.success=function(data,textStatus,jqXHR){if(jqXHR.responseJSON){if(jqXHR.responseJSON.error){var error=jqXHR.responseJSON.error;switch(error.status){case (401):_rapidmobile.showMessage(error.responseText);return false;default:settings.error(error,error.status,error.responseText);return false}}}success(data,textStatus,jqXHR)};ajax(settings)};$.getSaveHtml=function(){$("input").each(function(){$(this).attr("value",$(this).val())});return"<!DOCTYPE html><html>"+$("html").html()+"</html>"}}else{var ajax=$.ajax;$.ajax=function(url,settings){var error=url.error;url.error=function(jqXHR,textStatus,errorThrown){if(jqXHR.status==401){var location="login.jsp";
if(window.location.href.indexOf("/~?a=")>-1){var appId=$.getUrlVar("a");if(appId){location+="?requestApp="+appId}}window.location=location}else{error(jqXHR,textStatus,errorThrown)}};ajax(url,settings)}}function showValidationMessage(controlId,message){var control=$("#"+controlId);control.addClass("validation");var element=control.next("div.validation")[0];if(element){$(element).html(message)}else{control.after("<div class='validation'>"+message+"</div>")}}function hideValidationMessage(controlId){var control=$("#"+controlId);control.removeClass("validation");control.next("div.validation").remove()}function makeDataObject(data,field){if(data.rows&&data.fields&&!(field&&data[field])){return data}var fields=[];var rows=[];var fieldMap=[];if(field&&data[field]){data=data[field]}if($.isArray(data)){for(var i in data){var item=data[i];var row=[];if($.isPlainObject(item)){var fieldPos=0;for(var j in item){if(fieldMap[fieldPos]){if(fieldMap[fieldPos]!=j){fieldPos=-1;for(var k in fieldMap){if(j==fieldMap[k]){fieldPos=k;
break}}if(fieldPos==-1){fieldMap.push(j);fields.push(j);fieldPos=fields.length-1}}}else{fieldMap.push(j);fields.push(j);fieldPos=fields.length-1}row[fieldPos]=item[j];if(fieldPos<fields.length-1){fieldPos++}}}else{if(i==0){fields.push(field)}row=[item]}rows.push(row)}}else{var row=[];if($.isPlainObject(data)){for(var i in data){fields.push(i);row.push(data[i])}}else{fields.push(field);row.push(data)}rows.push(row)}data={fields:fields,rows:rows};return data}function mergeDataObjects(data1,data2){var data=null;if(data1){if(!data1.fields||!data1.rows){data1=makeDataObject(data1)}if(data2){if(!data2.fields||!data2.rows){data2=makeDataObject(data2)}var fields=[];for(var i in data2.fields){fields.push(data2.fields[i])}for(var i in data1.fields){var gotField=false;for(var j in fields){if(data1.fields[i]==fields[j]){gotField=true;break}}if(!gotField){fields.push(data1.fields[i])}}data={};data.fields=fields;data.rows=[];var totalRows=data1.rows.length;if(data2.rows.length>totalRows){totalRows=data2.rows.length
}for(var i=0;i<totalRows;i++){var row=[];for(var j in fields){var value=null;if(i<data1.rows.length){for(var k in data1.fields){if(fields[j]==data1.fields[k]){value=data1.rows[i][k];break}}}if(i<data2.rows.length&&value==null){for(var k in data2.fields){if(fields[j]==data2.fields[k]){value=data2.rows[i][k];break}}}row.push(value)}data.rows.push(row)}}else{data=data1}}else{data=data2}return data};