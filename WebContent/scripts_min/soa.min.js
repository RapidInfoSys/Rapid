var _soaDetails={};var _soaDataTypes=[{name:"string",value:1},{name:"integer",value:2},{name:"decimal",value:3},{name:"date",value:4},{name:"dateTime",value:5}];var _soaRestrictions=[];var _soaRestrictionTypes=[{type:"MinOccursRestriction",name:"minOccurs"},{type:"MaxOccursRestriction",name:"maxOccurs"},{type:"MinLengthRestriction",name:"minLength",dataTypes:[1]},{type:"MaxLengthRestriction",name:"maxLength",dataTypes:[1]},{type:"EnumerationRestriction",name:"enumeration",dataTypes:[1]}];var _listeners=[];$(document).mouseup(function(a){_reorderDetails=null});function getSOADataTypeSelect(c){var a="<select>";for(var b in _soaDataTypes){a+="<option value='"+_soaDataTypes[b].value+"' "+(c==_soaDataTypes[b].value?"selected='selected'":"")+">"+_soaDataTypes[b].name+"</option>"}a+="</select>";return a}function getSOARestrictionSelect(e,g){var b="<select>";for(var d in _soaRestrictionTypes){var f=_soaRestrictionTypes[d];var a=false;if(f.dataTypes){for(var c in f.dataTypes){if(e==f.dataTypes[c]){a=true;
break}}}if(!f.dataTypes||a){b+="<option value='"+f.type+"' "+(g==f.type?"selected='selected'":"")+">"+f.name+"</option>"}}b+="</select>";return b}function getRestrictionLabel(a){for(var b in _soaRestrictionTypes){var c=_soaRestrictionTypes[b];if(c.type==a.type){return c.name+"("+a.value+")"}}return"unknown"}function showSOARestrictions(h,f){var d=h[f.parent().index()-1];if(!d.restrictions){d.restrictions=[]}_soaRestrictions=d.restrictions;var a=$("#restrictionsDialogue");if(!a[0]){$("body").append("<div id='restrictionsDialogue' style='position:absolute;display:none;width:280px;border:1px solid black;background-color:white;font-size:11px;padding:10px;'></div>");a=$("#restrictionsDialogue");var g=a.append("<b style='float:left;margin-top:-5px;'>Restrictions</b><a href='#' style='float:right;margin-top:-5px;'>close</a></div>").children().last();_listeners.push(g.click(function(i){a.hide()}));a.append("<table class='propertiesPanelTable'></table>")}a.find("a.add").last().remove();a.append("<a href='#' class='add'>add...</a>").find("a").last().click({collection:h,control:f},function(i){_soaRestrictions.push({type:"MinOccursRestriction",value:"1"});
showSOARestrictions(i.data.collection,i.data.control)});var e=a.find("table");e.html("<tr><td style='padding-top:0;'><b>Type</b></td><td><b>Value</b></td><td style='width:32px;'>&nbsp;</td></tr>");for(var c in _soaRestrictions){var b=_soaRestrictions[c];e.append("<tr><td>"+getSOARestrictionSelect(d.dataType,b.type)+"</td><td><input value='"+b.value+"'/></td><td><img class='delete' src='images/bin_16x16.png' /><img class='reorder' src='images/moveUpDown_16x16.png' /></td></tr>")}e.find("select").change(function(j){var i=$(j.target);_soaRestrictions[i.parent().parent().index()-1].type=i.val()});e.find("input").keyup(function(j){var i=$(j.target);_soaRestrictions[i.parent().parent().index()-1].value=i.val()});e.find("img.delete").click({collection:h,control:f},function(i){_soaRestrictions.splice($(i.target).parent().parent().index()-1,1);showSOARestrictions(i.data.collection,i.data.control)});addReorder(_soaRestrictions,e.find("img.reorder"),function(i){showSOARestrictions(h,f)});a.css({top:f.offset().top,left:f.offset().left-200,display:"block"})
}function loadSOA(a){$("#rapid_P0_C489_").hide();$("#rapid_P0_C991_").hide();switch(a.type){case"SQLWebservice":_soaDetails=a;if(!a.name){a.name=""}$("#rapid_P0_C496_").val(a.name);if(!a.databaseConnectionIndex){a.databaseConnectionIndex=0}$("#rapid_P0_C536_").val(a.databaseConnectionIndex);if(!a.SQL){a.SQL=""}$("#rapid_P0_C559_").val(a.SQL);var k=$("#rapid_P0_C589_");var c=k.children("table");if(!c[0]){c=k.append("<table class='propertiesPanelTable'></table>").children("table")}c.html("<tr><td>Child element name</td><td>Data type</td><td>Restrictions</td><td style='width:32px;min-width:32px;'>&nbsp;</td></tr>");if(a.requestSchema&&a.requestSchema.rootElement){var l=a.requestSchema.rootElement;$("#rapid_P0_C593_").val(l.name);for(var f in l.childElements){var g=l.childElements[f];var m="click to add...";if(g.restrictions&&g.restrictions.length>0){m="";for(var e in g.restrictions){m+=getRestrictionLabel(g.restrictions[e])}}c.append("<tr><td class='elementName'><input value='"+g.name+"' /></td><td>"+getSOADataTypeSelect(g.dataType)+"</td><td class='restriction'>"+m+"</td><td><img class='delete' src='images/bin_16x16.png' /><img class='reorder' src='images/moveUpDown_16x16.png' /></td></tr>")
}c.find("input").keyup(a,function(j){var i=$(j.target);j.data.requestSchema.rootElement.childElements[i.parent().parent().index()-1].name=i.val()});c.find("select").change(a,function(j){var i=$(j.target);j.data.requestSchema.rootElement.childElements[i.parent().parent().index()-1].dataType=i.val()});c.find("td.restriction").click(a,function(i){showSOARestrictions(l.childElements,$(i.target))});addReorder(l.childElements,c.find("img.reorder"),function(i){loadSOA(a)});c.find("img.delete").click(a,function(i){i.data.requestSchema.rootElement.childElements.splice($(i.target).parent().parent().index()-1,1);loadSOA(i.data)})}else{$("#rapid_P0_C593_").val("")}c.append("<tr><td colspan='4'>add...</td></tr>");c.find("td").last().click(a,function(n){if(!n.data.requestSchema){n.data.requestSchema={}}var j=n.data.requestSchema;if(!j.rootElement){j.rootElement={}}var i=j.rootElement;if(!i.childElements){i.childElements=[]}i.childElements.push({name:"",dataType:1});loadSOA(n.data)});var h=$("#rapid_P0_C592_");
var b=h.children("table");if(!b[0]){b=h.append("<table class='propertiesPanelTable'></table>").children("table")}b.html("<tr><td>Child element name</td><td>Field</td><td>Data type</td><td>Restrictions</td><td style='width:32px;min-width:32px;'>&nbsp;</td></tr>");if(a.responseSchema&&a.responseSchema.rootElement){var d=a.responseSchema.rootElement;$("#rapid_P0_C594_").val(d.name);setData_radiobuttons("rapid_P0_C598_","'"+d.isArray+"'");for(var f in d.childElements){var g=d.childElements[f];var m="click to add...";if(g.restrictions&&g.restrictions.length>0){m="";for(var e in g.restrictions){m+=getRestrictionLabel(g.restrictions[e])}}b.append("<tr><td class='elementName'><input class='elementName' value='"+g.name+"' /></td><td class='elementField'><input class='elementField' value='"+g.field+"' /></td><td>"+getSOADataTypeSelect(g.dataType)+"</td><td class='restriction'>"+m+"</td><td><img class='delete' src='images/bin_16x16.png' /><img class='reorder' src='images/moveUpDown_16x16.png' /></td></tr>")
}b.find("input.elementName").keyup(a,function(j){var i=$(j.target);j.data.responseSchema.rootElement.childElements[i.parent().parent().index()-1].name=i.val()});b.find("input.elementField").keyup(a,function(j){var i=$(j.target);j.data.responseSchema.rootElement.childElements[i.parent().parent().index()-1].field=i.val()});b.find("select").change(a,function(j){var i=$(j.target);j.data.responseSchema.rootElement.childElements[i.parent().parent().index()-1].dataType=i.val()});b.find("td.restriction").click(a,function(i){showSOARestrictions(d.childElements,$(i.target))});addReorder(d.childElements,b.find("img.reorder"),function(i){loadSOA(a)});b.find("img.delete").click(a,function(i){i.data.responseSchema.rootElement.childElements.splice($(i.target).parent().parent().index()-1,1);loadSOA(i.data)})}else{$("#rapid_P0_C594_").val("");setData_radiobuttons("rapid_P0_C598_","false")}b.append("<tr><td colspan='4'>add...</td></tr>");b.find("td").last().click(a,function(i){if(!i.data.responseSchema){i.data.responseSchema={}
}var j=i.data.responseSchema;if(!j.rootElement){j.rootElement={}}var n=j.rootElement;if(!n.childElements){n.childElements=[]}n.childElements.push({name:"",field:"",dataType:1});loadSOA(i.data)});$("#rapid_P0_C489_").show();break;case"JavaWebservice":$("#rapid_P0_C944_").val(a.name);$("#rapid_P0_C989_").val(a.className);$("#rapid_P0_C991_").show();break}}function submitWebservice(){var b=$("#action").val();var d={SOAPAction:b};var c=$("input[name=contentType]:checked").val();if(c=="application/json"){d={Action:b}}var a=$("#request").val();$.ajax({url:"soa",type:"POST",data:a,headers:d,contentType:c,error:function(g,e,f){$("#response").text(f+" "+g.responseText)},success:function(e){if(e.xmlVersion){var f=(typeof XMLSerializer!=="undefined")?(new window.XMLSerializer()).serializeToString(e):e.xml;$("#response").text(f)}else{$("#response").text(JSON.stringify(e))}}})};