var _reorderDetails=null;function addReorder(collection,items,rerender){items.each(function(index){var img=$(this);img.on("dragstart",function(event){event.preventDefault()});_listeners.push(img.mousedown({collection:collection,index:index},function(ev){var img=$(ev.target);_reorderDetails={object:img,collection:ev.data.collection,index:ev.data.index}}));_listeners.push(img.mouseover({collection:collection,index:index,rerender:rerender},function(ev){var reorderTo=$(this);if(_reorderDetails){var collection=ev.data.collection;if(_reorderDetails.object[0]!==reorderTo[0]){if(_reorderDetails.collection===collection){var toIndex=ev.data.index;var fromIndex=_reorderDetails.index;var fromObject=collection[fromIndex];if(fromIndex>toIndex){for(var i=fromIndex;i>toIndex;i--){collection[i]=collection[i-1]}collection[toIndex]=fromObject}else{for(var i=fromIndex;i<toIndex;i++){collection[i]=collection[i+1]}collection[toIndex]=fromObject}_reorderDetails={object:$(ev.target),collection:collection,index:ev.data.index};
ev.data.rerender()}}}}))})};